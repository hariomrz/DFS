<!-- new Template -->
<div ng-controller="PollCtrl as poll" id="p-{{data.PollData[0].PollGUID}}" bindonce class="poll-feed-listing feed-act-{{data.ActivityGUID}}" ng-class="data.Viewed == '0' ? 'inview' : ''">
    <div id="act-{{data.ActivityGUID}}" ng-class="(isPollScope) ? 'feed-list' : ''">  
        <div class="feed-header">

            <div class="feed-header-left">
                <figure class="thumb-sm"> 
                    <a class="loadbusinesscard" entitytype="user" entityguid="{{data.UserGUID}}" ng-if="data.PostAsModuleID == '3' && data.ActivityType !== 'ProfilePicUpdated' && data.ActivityType !== 'ProfileCoverUpdated'" ng-href="{{data.SiteURL + data.UserProfileURL}}">
                        <img ng-if="data.UserProfilePicture !== '' && data.UserProfilePicture !== 'user_default.jpg'"   class="img-circle" ng-src="{{data.ImageServerPath + 'upload/profile/220x220/' + data.UserProfilePicture}}">
                        <span ng-if="(data.UserProfilePicture == '' || data.UserProfilePicture == 'user_default.jpg') && data.PostType !== '7'" class="default-thumb"><span ng-bind="getDefaultImgPlaceholder(data.UserName)"></span></span>
                    </a>
                    <a class="loadbusinesscard" entitytype="user" entityguid="{{data.UserGUID}}" ng-if="(data.ActivityType == 'ProfilePicUpdated' || data.ActivityType == 'ProfileCoverUpdated') && data.ModuleID !== '18'" ng-href="{{data.SiteURL + data.UserProfileURL}}">
                        <img ng-if="data.UserProfilePicture !== '' && data.UserProfilePicture !== 'user_default.jpg'"   class="img-circle" ng-src="{{data.ImageServerPath + 'upload/profile/220x220/' + data.UserProfilePicture}}">
                        <span ng-if="(data.UserProfilePicture == '' || data.UserProfilePicture == 'user_default.jpg') && data.PostType !== '7'" class="default-thumb"><span ng-bind="getDefaultImgPlaceholder(data.UserName)"></span></span>
                    </a>
                    <a class="loadbusinesscard" entitytype="user" entityguid="{{data.UserGUID}}" ng-if="data.PostType == '7' && data.ModuleID == '3'" ng-href="{{data.SiteURL + data.UserProfileURL}}">
                        <img err-Name="{{data.UserName}}"   class="img-circle" ng-src="{{data.ImageServerPath + 'upload/profile/220x220/' + data.UserProfilePicture}}">
                    </a>

                    <a class="loadbusinesscard" entitytype="page" entityguid="{{data.UserGUID}}" ng-if="data.PostAsModuleID == '18' && data.ActivityType !== 'ProfilePicUpdated' && data.ActivityType !== 'ProfileCoverUpdated'" ng-href="{{data.SiteURL + 'page/' + data.UserProfileURL}}">
                        <img ng-if="data.UserProfilePicture !== '' && data.UserProfilePicture !== 'user_default.jpg'"   class="img-circle" ng-src="{{data.ImageServerPath + 'upload/profile/220x220/' + data.UserProfilePicture}}">
                        <span ng-if="(data.UserProfilePicture == '' || data.UserProfilePicture == 'user_default.jpg') && data.PostType !== '7'" class="default-thumb"><span ng-bind="getDefaultImgPlaceholder(data.UserName)"></span></span>
                    </a>

                    <a class="loadbusinesscard" entitytype="page" entityguid="{{data.EntityGUID}}" ng-if="(data.ActivityType == 'ProfilePicUpdated' || data.ActivityType == 'ProfileCoverUpdated') && data.ModuleID == '18'" ng-href="{{data.SiteURL + 'page/' + data.EntityProfileURL}}">
                        <img ng-if="data.EntityProfilePicture !== ''"   class="img-circle" ng-src="{{data.ImageServerPath + 'upload/profile/220x220/' + data.EntityProfilePicture}}">
                    </a>

                    <a class="loadbusinesscard" entitytype="group" entityguid="{{data.EntityGUID}}" ng-if="data.PostType == '7' && data.ModuleID == '1'" ng-href="{{data.SiteURL + 'group/' + data.EntityProfileURL}}">
                        <img ng-if="data.EntityProfilePicture !== ''"   class="img-circle" ng-src="{{data.ImageServerPath + 'upload/profile/220x220/' + data.EntityProfilePicture}}">
                    </a>

                </figure>

                <div class="info-text" ng-bind-html="getTitleMessage(data)"></div> 

                <ul class="sub-navigation">                                                            
                    <li>
                        <div data-original-  data-placement="bottom" data-toggle="tooltip" class="dropdown inline" ng-if="data.PollData[0].IsExpired == '0'">
                            <a data-placement="bottom" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                                <span ng-if="data.PollData[0].IsExpired == '0' && data.PollData[0].ExpiryDateTime != Null && data.PollData[0].ExpiryDateTime != 'NEVER'" class="time-left">
                                    <span ng-controller="PollCtrl as poll1" ng-if="data.PollData[0].ExpiryDateTime" class="time-left hide" ng-bind="data.PollData[0].ExpiryDateTime | convert_poll_expiry:data.PollData[0].PollGUID"></span>
                                    <div class="countdown_{{data.PollData[0].PollGUID}} ">
                                        <span class="ClosesIn">Closes</span>
                                        <span class="days">00</span>
                                        <span class="timeRefDays">days</span>
                                        <span class="hours">00</span>
                                        <span class="timeRefHours">hours</span>

                                        <span class="DaysLeft">left</span>
                                    </div>
                                </span>
                                <span ng-if="data.PollData[0].ExpiryDateTime == 'NEVER'" class="time-left">
                                    Never
                                </span>
                            </a>
                            <ul class="dropdown-menu" ng-if="data.PollData[0].IsOwner == 1">
                                <li ng-repeat="ExpireDate in ExpireDateArr" ng-cloak>
                                    <a data-ng-click="set_expire_date_polls($event, ExpireDate.duration, data.ActivityGUID, data.PollData[0].PollGUID)">{{ExpireDate.duration}} <span ng-if="ExpireDate.duration == 1">Day</span><span ng-if="ExpireDate.duration > 1">Days</span><small class="pull-right text-secondary">{{ExpireDate.date}}</small></a>
                                </li>
                                <li>
                                    <a data-ng-click="set_expire_date_polls($event, '', data.ActivityGUID, data.PollData[0].PollGUID)">Never</a>
                                </li>
                                <li>
                                    <a class="close" data-ng-click="set_expire_date_polls($event, - 1, data.ActivityGUID, data.PollData[0].PollGUID)">Close Now</a>
                                </li>
                            </ul>
                        </div>
                        <a href="javascript:void();" ng-if="data.PollData[0].IsExpired == '1'" >Expired</a>
                    </li>

                    <li ng-if="data.PollData[0].IsVoted != 1 && data.PollData[0].IsOwner == 1 && data.PollData[0].ShowVoteOptionToAdmin != 1 && data.PollData[0].IsExpired != '1'" ng-click="ShowVoteOptionAdminEmit(data.ActivityGUID);" >
                        <a>Vote</a>
                    </li>
                    <li ng-if="data.PollData[0].IsVoted != 1 && data.PollData[0].ShowVoteOptionToAdmin == 1 && data.PollData[0].IsOwner == 1 && data.PollData[0].IsExpired != '1'" ng-click="ShowVoteOptionAdminEmit(data.ActivityGUID);">
                        <a>Cancel</a>
                    </li>
                </ul>

            </div>



            <ul class="feed-nav pull-right" ng-if="data.IsDeleted == 1">
                <li class="dropdown">
                    <button type="button" data-toggle="dropdown" >
                        <svg height="20px" width="20px" class="svg-icons">
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{SiteURL+'assets/img/sprite.svg#icnVerticalDot'}}"></use>
                        </svg>
                    </button>
                    <ul class="dropdown-menu feedaction" ng-cloak ng-if="data.IsDeleted == 1">
                        <li><a ng-click="restoreEmit(data.ActivityGUID);">Restore</a></li>
                        <li><a ng-click="deleteEmit(data.ActivityGUID);">Delete Permanently</a></li>
                    </ul>
                </li>
            </ul>





            <ul class="feed-nav pull-right showonhover" ng-if="data.IsDeleted == 0 && data.StatusID != '10'"> 

                <li ng-if="data.IsMember">

                    <i class="ficon-archive" ng-cloak 
                       ng-show="data.IsArchive !== 1 && (!data.ReminderData.ReminderGUID || (!data.ReminderData.ReminderGUID && CheckReminderDate(data.ActivityGUID)))" 
                       data-toggle="tooltip" 
                       data-original-title="Remove it from your newsfeed. It will popup again only if someone tags you."  
                       ng-click="toggleArchiveEmit(data.ActivityGUID);"></i>
                    <i class="ficon-archive" ng-cloak 
                       ng-show="data.IsArchive !== 1 && data.ReminderData.ReminderGUID && !CheckReminderDate(data.ActivityGUID)" 
                       data-toggle="tooltip" 
                       data-original-title="Remove it from your newsfeed. It will popup again on the selected date of reminder." 
                       ng-click="changeReminderStatusClick(data.ActivityGUID, data.ReminderData.ReminderGUID, 'ARCHIVED');"></i>
                    <i class="ficon-archive" ng-cloak 
                       ng-show="data.IsArchive == 1 && data.ReminderData.ReminderGUID" 
                       data-toggle="tooltip" 
                       data-original-title="Unarchive" 
                       ng-click="changeReminderStatusClick(data.ActivityGUID, data.ReminderData.ReminderGUID, 'ACTIVE');"></i>
                    <i class="ficon-archive" ng-cloak 
                       ng-show="data.IsArchive == 1 && !data.ReminderData.ReminderGUID" 
                       data-toggle="tooltip" 
                       data-original-title="Unarchive" 
                       ng-click="toggleArchiveEmit(data.ActivityGUID);"></i>                   
                </li>

                <li ng-if="data.IsFlaggedIcon" ng-click="FlagUserEmit(data.ActivityGUID);">
                    <button type="button"  data-toggle="modal" data-target="#flagModal">
                        <i class="ficon-flag"></i>   
                    </button>
                </li> 



                <li class="dropdown">
                    <i class="ficon-arrow-down" data-toggle="dropdown" ></i>

                    <!-- Options Starts -->
                    <ul class="dropdown-menu feedaction">
                        <li data-ng-if="data.IsTagged == '1'">
                            <a data-ng-click="removeTagEmit(data.ActivityGUID);" >Remove Tag</a>
                        </li>
                        <li data-ng-if="data.CanMakeSticky == '1' && data.Visibility !== '4'">
                            <a data-ng-click="stickyEmit(data.ActivityGUID);" data-ng-if="data.IsSticky == '0'" >Make Sticky</a>
                            <a data-ng-click="stickyEmit(data.ActivityGUID);" data-ng-if="data.IsSticky == '1'" >Remove From Sticky</a>
                        </li>
                        <li ng-if="(data.FavouriteAllowed == 1)">
                            <a ng-click="setFavouriteEmit(data.ActivityGUID);" ng-bind="(data.IsFavourite == '1') ? 'Remove from favorites' : 'Add to favorites'"></a>
                        </li>
                        <li data-ng-if="data.FlaggedByAny == '1' && data.IsEntityOwner == '1' && data.Flaggable == '1'"><a ng-click="approveFlagActivityEmit(data.ActivityGUID);" >Approve Flag Activity</a></li>
                        <li data-ng-if="data.Settings.m17 == '1'">
                            <a ng-cloak ng-click="subscribeEmit('ACTIVITY', data.ActivityGUID);" ng-show="data.IsSubscribed == '1'" ><span>Unsubscribe from this post</span> <i class="icon-n-info" data-toggle="tooltip" data-placement="bottom" data-original-title="Click here if you do not wish to recieve any notifications regarding this post.">&nbsp;</i></a>
                            <a ng-cloak ng-click="subscribeEmit('ACTIVITY', data.ActivityGUID);" ng-show="data.IsSubscribed == '0'" ><span>Subscribe to this post</span> <i class="icon-n-info" data-toggle="tooltip" data-placement="bottom" data-original-title="Click here if you wish to recieve notifications regarding this post.">&nbsp;</i></a>
                        </li>

                        <li ng-show="data.MuteAllowed == 1">
                            <a ng-cloak ng-show="IsNewsFeed == 1 && data.ModuleID !== '18' && data.IsEntityOwner !== 1" ng-click="muteUserEmit(data.ModuleID, data.UserGUID);">
                                <span>Mute user</span> <i class="icon-n-info" data-toggle="tooltip" data-placement="bottom"  data-original-title="Mute user">&nbsp;</i>
                            </a>

                            <a ng-cloak ng-show="IsNewsFeed == 1 && data.ModuleID == '18' && data.IsEntityOwner !== 1" ng-click="muteUserEmit(data.ModuleID, data.UserGUID);">
                                <span>Mute page</span> <i class="icon-n-info" data-toggle="tooltip" data-placement="bottom"  data-original-title="Mute page">&nbsp;</i>
                            </a>
                        </li>
                        <li data-ng-if="data.IsOwner == '0' && data.IsEntityOwner == '0' && data.ShowFlagBTN == '1'">
                            <a data-target="#reportAbuse" data-toggle="modal" onclick="flagValSet(this, 'Activity')" id="tid-{{data.ActivityGUID}}" data-ng-if="data.IsFlagged == '0' && data.FlagAllowed == '1' && data.Flaggable == '1' && data.Settings.m12 == '1' && data.IsOwner !== '1'" >Flag</a>
                            <a data-ng-if="data.IsFlagged == '1' && data.FlagAllowed == '1' && data.Flaggable == '1' && data.Settings.m12 == '1' && data.IsOwner !== '1'" >Flagged</a>
                        </li>
                        <li data-ng-if="data.CanBlock == 1">
                            <a ng-click="blockUserEmit(data.UserGUID);" >Block</a>
                        </li>
                        <li ng-if="data.IsOwner == 1 || data.IsEntityOwner == 1">
                            <a ng-if="data.CommentsAllowed == 1" ng-click="commentsSwitchEmit('ACTIVITY', data.ActivityGUID)" >Turn Comments Off</a>
                            <a ng-if="data.CommentsAllowed == 0" ng-click="commentsSwitchEmit('ACTIVITY', data.ActivityGUID)" >Turn Comments On</a>
                        </li>
                        <li data-ng-if="(data.CanRemove == '1' || data.IsOwner)">
                            <a ng-click="deleteEmit(data.ActivityGUID);"  >Remove post</a>
                        </li>
                    </ul>
                    <!-- Options Ends -->
                </li>
            </ul>

            <ul class="feed-nav pull-right" ng-if="data.IsDeleted == 0 && data.StatusID != '10'">
                <li ng-cloak>
                    <a ng-if="data.IsSingleActivity!='1'" ng-href="{{data.ActivityURL}}" class="text-sm-off">
                        <span ng-cloak ng-if="data.ActivityType !== 'AlbumUpdated'" data-toggle="tooltip" ng-attr-data-original-title="{{getTimeFromDate(UTCtoTimeZone(data.CreatedDate));}}" ng-bind="date_format((data.CreatedDate))"></span>
                        <span ng-cloak ng-if="data.ActivityType == 'AlbumUpdated'" data-toggle="tooltip" ng-attr-data-original-title="{{getTimeFromDate(UTCtoTimeZone(data.ModifiedDate));}}" ng-bind="date_format((data.ModifiedDate))"></span>
                    </a>
                    <a ng-if="data.IsSingleActivity=='1'" class="text-sm-off">
                        <span ng-cloak ng-if="data.ActivityType !== 'AlbumUpdated'" data-toggle="tooltip" ng-attr-data-original-title="{{getTimeFromDate(UTCtoTimeZone(data.CreatedDate));}}" ng-bind="date_format((data.CreatedDate))"></span>
                        <span ng-cloak ng-if="data.ActivityType == 'AlbumUpdated'" data-toggle="tooltip" ng-attr-data-original-title="{{getTimeFromDate(UTCtoTimeZone(data.ModifiedDate));}}" ng-bind="date_format((data.ModifiedDate))"></span>
                    </a>
                </li>


                <li >
                    <i ng-if="data.CanRemove == '1' && data.ShowPrivacy == '1' && data.ModuleID == '3' && data.IsDeleted == 0" 

                       data-toggle="dropdown" 
                       data-dropdown="iconmenu">
                        <i ng-if="data.Visibility == '1'" class="ficon-globe"></i>
                        <i ng-if="data.Visibility == '2'" class="ficon-friends"></i>
                        <i ng-if="data.Visibility == '3'" class="ficon-friends"></i>
                        <i ng-if="data.Visibility == '4'" class="ficon-user"></i>
                    </i>
                    <i data-toggle="tooltip" ng-cloak data-original-title="Everyone" ng-show="data.Visibility == '1' && (data.CanRemove == '0' || data.ShowPrivacy == '0' || data.IsDeleted == 1) && data.ModuleID == '3'" class="ficon-globe"></i>                         
                    <i data-toggle="tooltip" ng-cloak data-original-title="Friends" ng-show="data.Visibility == '3' && (data.CanRemove == '0' || data.ShowPrivacy == '0' || data.IsDeleted == 1) && data.ModuleID == '3'" class="ficon-friends"></i>
                    <i data-toggle="tooltip" ng-cloak data-original-title="Only Me" ng-show="data.Visibility == '4' && (data.CanRemove == '0' || data.ShowPrivacy == '0' || data.IsDeleted == 1) && data.ModuleID == '3'" class="ficon-user"></i>
                    <ul class="dropdown-menu feed-privacy" data-dropdown="privacydropdown" ng-if="data.Visibility != '4'">
                        <li>
                            <a ng-class="data.Visibility == '1' ? 'active' : ''" href="javascript:void(0);" ng-click="privacyEmit(data.ActivityGUID, '1');">
                                <i class="ficon-globe"></i><span>Everyone</span>
                            </a>
                        </li>

                        <li ng-if="SettingsData.m10=='1'">
                            <a ng-class="data.Visibility == '3' ? 'active' : ''" href="javascript:void(0);" ng-click="privacyEmit(data.ActivityGUID, '3');">
                                <i class="ficon-friends"></i><span ng-bind="get_tooltip_privacy_title(data, 3)"></span>
                            </a>

                        </li>
                    </ul>
                </li>


            </ul>

        </div>


        <div class="feed-body">
            <div class="feed-content">
                <div ng-if="!IsSingleActivity && data.PostTitle != ''" class="post-type-title">
                    <a ng-href="{{data.ActivityURL}}" ng-bind="data.PostTitle" class="a-link"></a>
                </div>
                <p ng-if="data.PostContent" ng-bind-html="textToLink(data.PostContent)"></p>
                <div class="poll-feed-description pollQuestion">
                    <ng-include src="partialURL+'activity/'+data.ViewTemplate+'.html'+app_version"></ng-include>
                    <div class="feed-post-activity">
                    <div class="activity-bar"  ng-if="((data.PollData[0].IsVoted != 1 && data.PollData[0].IsOwner != 1) || (data.PollData[0].ShowVoteOptionToAdmin == 1 && data.PollData[0].IsOwner == 1)) && data.PollData[0].IsExpired == '0'">
                        <ul class="feed-actions">

                            <!-- Like Starts -->
                            <li ng-if="data.LikeAllowed == '1'" ng-class="(data.IsLike == '1') ? 'active' : '';">
                                <span class="like-btn">
                                    <i tooltip 
                                       data-placement="top" 
                                       data-container="body" 
                                       ng-attr-data-original-title="{{(data.IsLike == '1') ? 'Unlike' : (data.NoOfLikes=='0') ? 'Be the first to like' : 'Like' ;}}" 
                                       ng-click="likeEmit(data.ActivityGUID, 'ACTIVITY', data.ActivityGUID);"
                                       ng-class="data.IsLike == '1' ? 'ficon-heart active' : 'ficon-heart'" ></i>
                                    
                                    
                                    
                                    <abbr ng-if="data.NoOfLikes > 0" ng-bind="data.NoOfLikes" ng-click="likeDetailsEmit(data.ActivityGUID, 'ACTIVITY');"></abbr>
                                </span>
                            </li>


                            <li ng-if="data.CommentsAllowed == 0 && data.NoOfComments > 0">
                                <a ng-bind="'Comments (' + data.NoOfComments + ')'" ng-click="(data.ShowComments == 1) ? data.ShowComments = 0 : data.ShowComments = 1;"></a>                        
                            </li>

                            <li ng-if="data.CommentsAllowed == 1">
                                <a ng-click="postCommentEditor(data.ActivityGUID, FeedIndex); data.showeditor = true;" ng-if="LoginSessionKey != '' && data.NoOfComments == 0">
                                    Be the first to comment
                                </a>
                                <a ng-click="loginRequired()" ng-if="LoginSessionKey == '' && data.NoOfComments == 0">
                                    Be the first to comment
                                </a>
                                <a ng-if="data.NoOfComments > 0" ng-bind="'Comments (' + data.NoOfComments + ')'" ng-click="(data.ShowComments == 1) ? data.ShowComments = 0 : data.ShowComments = 1;"></a>                        
                            </li>

                            <!-- Like Ends -->
                            <!-- Favourite Starts -->

                            <!-- Favourite Ends -->
                            <!-- Share Starts -->
                            <!-- <li ng-if="data.ShareAllowed==1 && data.Settings.m15=='1'"> -->                                        
                            <li data-toggle="tooltip" data-original-title="Share" ng-cloak ng-if="data.ShareAllowed == '1'" class="cursor-pointer">
                                <a ng-disabled="data.IsDeleted == 1" type="button" ng-click="shareEmit(data.ActivityGUID);" >
                                    <span class="icon">
                                        <i class="ficon-share f-mlg"></i>
                                    </span>
                                </a>
                            </li>


                            <!-- Share Ends -->
                            <li ng-if="data.PollData[0].PostForCount == '0' && data.Visibility == '1' && data.ModuleID == '3' && data.PollData[0].IsExpired == '0'">
                                <div class="btn-group invite-group">
                                    <button ng-click="get_entities_for_invite(data.PollData[0].PollGUID);" type="button" class="btn btn-default"> <span class="text">+ Invite</span> </button>
                                    <button type="button" class="btn btn-default" ng-click="remind_all(data.PollData[0].PollGUID)">
                                        <span class="icon">
                                            <i class="ficon-restore"></i>
                                        </span>
                                    </button>
                                </div>
                            </li>







                        </ul>

                        <ul class="feed-action-right">

                            <li ng-if="data.StatusID == '10'">
                                <span class="date-label">DRAFT</span> 
                            <li ng-if="SettingsData.m28==1 && data.Reminder.ReminderDateTime && data.Reminder.Status == 'ACTIVE' && data.ReminderData.ReminderDay">
                                <span class="date-label reminder-set" >
                                    {{data.ReminderData.ReminderDay}} {{data.ReminderData.MonthName}}
                                </span>
                            </li>
                            <li ng-if="data.IsFavourite == '1'">
                                <i class="ficon-star"></i>
                            </li>
                        </ul>

                        <!-- -->
                        <div class="pull-right  pull-right-page">
                            <div ng-if="data.ActivityType == 'PagePost' && data.IsEntityOwner == '1'" class="post-as-page">
                                <div class="dropdown m-t-m5">
                                    <button type="button" class="btn btn-default dropdown-toggle btn-sm" data-toggle="dropdown" aria-expanded="false">
                                        <span class="user-img-icon">


                                            <img class="img-circle show-pic" alt="User" ng-if="data.ModuleEntityOwner == 0 && LoggedInProfilePicture !== ''" ng-src="{{data.ImageServerPath + 'upload/profile/36x36/' + LoggedInProfilePicture}}">
                                            <img class="img-circle show-pic" alt="User" ng-if="data.ModuleEntityOwner == 1 && data.UserProfilePicture !== ''" ng-src="{{data.ImageServerPath + 'upload/profile/36x36/' + data.UserProfilePicture}}">

                                            <span class="spacel-icon">
                                                <i class="caret"></i>
                                            </span>
                                        </span>
                                    </button>
                                    <ul class="dropdown-menu dropwith-img" role="menu">
                                        <li>
                                            <a ng-click="likeStatusEmit(data.ActivityGUID, 'User');" onClick="$(this).parent('li').parent('ul').parent('div').next('.module-entity-owner').val(0);" href="javascript:void(0);">
                                                <span class="mark-icon">



                                                    <img ng-if="LoggedInProfilePicture !== ''" class="img-circle user-pic" title="User" alt="User" ng-src="{{data.ImageServerPath + 'upload/profile/36x36/' + LoggedInProfilePicture}}">
                                                    <img ng-if="LoggedInProfilePicture == ''" ng-src="{{AssetBaseUrl + 'img/profiles/user_default.jpg'}}" class="img-circle user-pic"  >

                                                </span> {{LoggedInName}}
                                            </a>
                                        </li>
                                        <li>
                                            <a ng-click="likeStatusEmit(data.ActivityGUID, 'Page');" onClick="$(this).parent('li').parent('ul').parent('div').next('.module-entity-owner').val(1);" href="javascript:void(0);">
                                                <span class="mark-icon">
                                                    <img ng-if="data.EntityProfilePicture !== ''" class="img-circle entity-pic" title="Page" alt="Page" ng-src="{{data.ImageServerPath + 'upload/profile/36x36/' + data.EntityProfilePicture}}">
                                                </span> {{data.EntityName}}
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <input type="hidden" class="module-entity-owner" value="{{data.PostAsEntityOwner}}" />
                            </div>
                        </div>
                        <!-- -->
                        <div class="invite-vote-count">
                            <button data-ng-if="data.PollData[0].IsAnonymous == 0" class="btn btn-primary feed-vote" data-ng-click="vote($event, data.ActivityGUID, data.PollData[0].PollGUID)">VOTE</button>
                            <button data-ng-if="data.PollData[0].IsAnonymous == 1" class="btn btn-primary btn-anonymous feed-vote"  data-ng-click="vote($event, data.ActivityGUID, data.PollData[0].PollGUID)" title="Votes casted on this poll will all be anoymous. Your identity will be hidden,only vote will be counted.">VOTE<small>as anonymous</small></button>
                        </div>
                        <div class="invite-vote-count">
                            <ul class="sub-navigation pull-left" ng-cloak ng-if="data.PollData[0].Options[0].pollTotalVotes > 0">
                                <li data-ng-if="data.PollData[0].IsAnonymous == 0" ng-click="VoteDetailsEmit(data.PollData[0].PollGUID, 'init');"><a href="javascript:void(0);">Voted <b ng-bind="data.PollData[0].Options[0].pollTotalVotes"></b></a></li>
                                <li data-ng-if="data.PollData[0].IsAnonymous == 1"><a href="javascript:void(0);">Voted <b ng-bind="data.PollData[0].Options[0].pollTotalVotes"></b></a></li>
                            </ul>
                            <div class="dropup viewPollMenu" ng-if="data.ShowInviteGraph == '1'" ng-click="pollViewDetail(data.ActivityGUID + '--' + data.PollData[0].PollGUID)">
                                <a class="view-poll dropdown-toggle" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="icon-poll"></i></a>
                                <ul class="dropdown-menu viewPoll-dropup" aria-labelledby="dropdownMenu2">
                                    <li>
                                        <div class="pieChart-wrap">
                                            <div id="pvd{{data.ActivityGUID + '--' + data.PollData[0].PollGUID}}" style="width:96px; height:96px;"></div>
                                        </div>
                                        <div class="viewListing">
                                            <a ng-click="get_user_details(data.PollData[0].PollGUID, 'Invited');">
                                                <span class="disc" style="background:#28D0C8;"></span>Invited <span ng-bind="total_invited"></span></a>
                                            <a ng-click="get_user_details(data.PollData[0].PollGUID, 'Voted');">
                                                <span class="disc" style="background:#D575BA;"></span>Voted <span ng-bind="total_voted"></span></a>
                                            <a ng-click="get_user_details(data.PollData[0].PollGUID, 'Awaited');">
                                                <span class="disc" style="background:#6c73de;"></span>Awaited <span ng-bind="total_awaiting"></span></a>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="activity-bar" ng-if="((data.PollData[0].IsVoted == 1 && data.PollData[0].IsOwner != 1) || (!data.PollData[0].ShowVoteOptionToAdmin && data.PollData[0].IsOwner == 1)) || data.PollData[0].IsExpired == '1'">
                        <ul class="feed-actions">
                            <!-- Like Starts -->

                            <!-- Like Starts -->
                            <li ng-if="data.LikeAllowed == '1'" ng-class="(data.IsLike == '1') ? 'active' : '';">
                                <span class="like-btn">
                                    <i tooltip data-placement="top" 
                                       data-container="body"
                                       ng-attr-data-original-title="{{(data.IsLike == '1') ? 'Unlike' : (data.NoOfLikes=='0') ? 'Be the first to like' : 'Like' ;}}" 
                                       ng-click="likeEmit(data.ActivityGUID, 'ACTIVITY', data.ActivityGUID);"
                                       ng-class="data.IsLike == '1' ? 'ficon-heart active' : 'ficon-heart'" ></i>
                                    <abbr ng-if="data.NoOfLikes > 0" ng-bind="data.NoOfLikes" ng-click="likeDetailsEmit(data.ActivityGUID, 'ACTIVITY');"></abbr>
                                </span>
                            </li>


                            <li ng-if="data.CommentsAllowed == 0 && data.NoOfComments > 0">
                                <a ng-bind="'Comments (' + data.NoOfComments + ')'"  ng-click="(data.ShowComments == 1) ? data.ShowComments = 0 : data.ShowComments = 1;"></a>                        
                            </li>

                            <li ng-if="data.CommentsAllowed == 1">
                                <a ng-click="postCommentEditor(data.ActivityGUID, FeedIndex); data.showeditor = true;" ng-if="LoginSessionKey != '' && data.NoOfComments == 0">
                                    Be the first to comment
                                </a>
                                <a ng-click="loginRequired()" ng-if="LoginSessionKey == '' && data.NoOfComments == 0">
                                    Be the first to comment
                                </a>
                                <a ng-if="data.NoOfComments > 0" ng-bind="'Comments (' + data.NoOfComments + ')'"></a>                        
                            </li>


                            <!-- Like Ends -->
                            <!-- Favourite Starts -->

                            <!-- Favourite Ends -->
                            <!-- Share Starts -->
                            <!-- <li ng-if="data.ShareAllowed==1 && data.Settings.m15=='1'"> -->                                        
                            <li data-toggle="tooltip" data-original-title="Share" ng-cloak ng-if="data.Settings.m15 == '1' && data.ShareAllowed == '1'" class="cursor-pointer">
                                <a ng-disabled="data.IsDeleted == 1" type="button" ng-click="shareEmit(data.ActivityGUID);" >
                                    <span class="icon">
                                        <i class="ficon-share f-mlg"></i>
                                    </span>
                                </a>
                            </li>

                            <!-- Share Ends -->
                            <li ng-if="data.PollData[0].PostForCount == '0' && data.Visibility == '1' && data.ModuleID == '3' && data.PollData[0].IsExpired == '0'">

                                <div class="btn-group invite-group">
                                    <button ng-click="get_entities_for_invite(data.PollData[0].PollGUID);" type="button" class="btn btn-default"> <span class="text">+ Invite</span> </button>
                                    <button type="button" class="btn btn-default" ng-click="remind_all(data.PollData[0].PollGUID)">
                                        <i class="re-invite">
                                            <svg height="16px" width="14px" class="svg-icons">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{SiteURL+'assets/img/sprite.svg#reSend'}}"></use>
                                            </svg>
                                        </i>
                                    </button>
                                </div>
                            </li>
                            <!-- Share Ends -->
                        </ul>

                        <ul class="feed-action-right">

                            <li ng-if="data.StatusID == '10'">
                                <span class="date-label">DRAFT</span> 
                            <li ng-if="data.Reminder.ReminderDateTime && data.Reminder.Status == 'ACTIVE'  && data.ReminderData.ReminderDay">
                                <span class="date-label reminder-set" >
                                    {{data.ReminderData.ReminderDay}} {{data.ReminderData.MonthName}}
                                </span>
                            </li>
                            <li ng-if="data.IsFavourite == '1'">
                                <i class="ficon-star"></i>
                            </li>
                        </ul>
                        <!-- -->
                        <div class="pull-right  pull-right-page">
                            <div ng-if="data.ActivityType == 'PagePost' && data.IsEntityOwner == '1'" class="post-as-page">
                                <div class="dropdown m-t-m5">
                                    <button type="button" class="btn btn-default dropdown-toggle btn-sm" data-toggle="dropdown" aria-expanded="false">
                                        <span class="user-img-icon">


                                            <img class="img-circle show-pic" alt="User" ng-if="data.ModuleEntityOwner == 0 && LoggedInProfilePicture !== ''" ng-src="{{data.ImageServerPath + 'upload/profile/36x36/' + LoggedInProfilePicture}}">
                                            <img class="img-circle show-pic" alt="User" ng-if="data.ModuleEntityOwner == 1 && data.UserProfilePicture !== ''" ng-src="{{data.ImageServerPath + 'upload/profile/36x36/' + data.UserProfilePicture}}">

                                            <span class="spacel-icon">
                                                <i class="caret"></i>
                                            </span>
                                        </span>
                                    </button>
                                    <ul class="dropdown-menu dropwith-img" role="menu">
                                        <li>
                                            <a ng-click="likeStatusEmit(data.ActivityGUID, 'User');" onClick="$(this).parent('li').parent('ul').parent('div').next('.module-entity-owner').val(0);" href="javascript:void(0);">
                                                <span class="mark-icon">



                                                    <img ng-if="LoggedInProfilePicture !== ''" class="img-circle user-pic" title="User" alt="User" ng-src="{{data.ImageServerPath + 'upload/profile/36x36/' + LoggedInProfilePicture}}">
                                                    <img ng-if="LoggedInProfilePicture == ''" ng-src="{{AssetBaseUrl + 'img/profiles/user_default.jpg'}}" class="img-circle user-pic"  >

                                                </span> {{LoggedInName}}
                                            </a>
                                        </li>
                                        <li>
                                            <a ng-click="likeStatusEmit(data.ActivityGUID, 'Page');" onClick="$(this).parent('li').parent('ul').parent('div').next('.module-entity-owner').val(1);" href="javascript:void(0);">
                                                <span class="mark-icon">
                                                    <img ng-if="data.EntityProfilePicture !== ''" class="img-circle entity-pic" title="Page" alt="Page" ng-src="{{data.ImageServerPath + 'upload/profile/36x36/' + data.EntityProfilePicture}}">
                                                </span> {{data.EntityName}}
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <input type="hidden" class="module-entity-owner" value="{{data.PostAsEntityOwner}}" />
                            </div>
                        </div>
                        <!-- -->
                        <div class="invite-vote-count">
                            <ul class="sub-navigation pull-left" ng-cloak ng-if="data.PollData[0].Options[0].pollTotalVotes > 0">
                                <li data-ng-if="data.PollData[0].IsAnonymous == 0" ng-click="VoteDetailsEmit(data.PollData[0].PollGUID, 'init');"><a href="javascript:void(0);">Voted <b ng-bind="data.PollData[0].Options[0].pollTotalVotes"></b></a></li>
                                <li data-ng-if="data.PollData[0].IsAnonymous == 1"><a href="javascript:void(0);">Voted <b ng-bind="data.PollData[0].Options[0].pollTotalVotes"></b></a></li>
                            </ul>
                            <div class="dropup viewPollMenu" ng-if="data.ShowInviteGraph == '1'" ng-click="pollViewDetail(data.ActivityGUID + '--' + data.PollData[0].PollGUID)">
                                <a class="view-poll dropdown-toggle" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="icon-poll"></i></a>
                                <ul class="dropdown-menu viewPoll-dropup" aria-labelledby="dropdownMenu2">
                                    <li>
                                        <div class="pieChart-wrap">
                                            <div id="pvd{{data.ActivityGUID + '--' + data.PollData[0].PollGUID}}" style="width:96px; height:96px;"></div>
                                        </div>
                                        <div class="viewListing">
                                            <a ng-click="get_user_details(data.PollData[0].PollGUID, 'Invited');">
                                                <span class="disc" style="background:#28D0C8;"></span>Invited <span ng-bind="total_invited"></span></a>
                                            <a ng-click="get_user_details(data.PollData[0].PollGUID, 'Voted');">
                                                <span class="disc" style="background:#D575BA;"></span>Voted <span ng-bind="total_voted"></span></a>
                                            <a ng-click="get_user_details(data.PollData[0].PollGUID, 'Awaited');">
                                                <span class="disc" style="background:#6c73de;"></span>Awaited <span ng-bind="total_awaiting"></span></a>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="feed-footer" ng-hide="data.NoOfComments == 0 && !data.showeditor" ng-class="(data.NoOfComments > 0) ? 'is-comments' : '';">
            <span ng-include src="partialURL+'activity/Comments.html'+app_version"></span>
        </div>

    </div>

</div>
