(this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]||[]).push([[199],{923:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return v}));var n=t(11),l=t(12),s=t(15),i=t(14),r=t(0),c=t.n(r),o=t(155),m=t(156),d=t(499),u=t(154),p=t(8),h=t(9),b=t(5),f=t.n(b),g=t(18),y=t(107),E=t(10),v=function(e){Object(s.a)(t,e);var a=Object(i.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).add=function(){var e=l.state.add;e.admin_id&&delete e.email,l.setState({posting:!0});var a=e;h.a.Rest(p.nk+p.c,a).then((function(e){e.response_code===p.qk?(l.setState({posting:!1}),g.notify.show(e.message,"success",5e3),l.props.history.push("/distributors")):g.notify.show(p.Ri,"error",3e3),l.setState({posting:!1})}))},l.handleChange=function(e){var a=e.target.name,t=e.target.value,n=l.state.add;"mobile"===a?11!=t.trim().length&&(n[a]=t):"commission_percent"===a?n[a]=E.i.decimalValidate(t,3):"fullname"===a||"city"===a?(t.length>=0&&t.match(/^[a-zA-Z,]+(\s{0,1}[a-zA-Z, ])*$/)||0==t.length)&&(n[a]=t):n[a]=t,f.a.isUndefined(l.state.add.admin_id)||l.setState({formValid:!0}),l.setState({add:n},(function(){l.validateForm(a,t)}))},l.validateForm=function(e,a){var t=l.state.formValid,n=a.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i);switch(e){case"fullname":t=a.length>0;break;case"email":t=!!n;break;case"mobile":case"role":case"commission_percent":case"state_id":t=a.length>0}l.setState({formValid:t})},l.handleSelectChange=function(e){var a=l.state.add;a.role=e?e.value:"",l.setState({add:a},(function(){f.a.isUndefined(l.state.add.admin_id)||l.setState({formValid:!0})}))},l.handleSelectStateChange=function(e){var a=l.state.add;a.state_id=e?e.value:"",l.setState({add:a},(function(){l.validateForm("state_id",a.state_id)}))},l.getStateList=function(){var e={master_country_id:l.state.counrty_id};h.a.Rest(p.nk+p.Rb,e).then((function(e){if(e.response_code==p.qk){var a=[];f.a.map(e.data,(function(e){a.push({value:e.master_state_id,label:e.name})})),l.setState({stateList:a})}else g.notify.show(p.Ri,"error",3e3)})).catch((function(e){g.notify.show(p.Ri,"error",3e3)}))},l.goBack=function(){l.setState({backDisable:!0},(function(){l.props.history.goBack(),setTimeout((function(){l.setState({backDisable:!1})}),1e3)}))},"undefined"==l.props.location.state&&l.props.history.push("/distributors"),l.state={counrty_id:"101",add:l.props.location.state?l.props.location.state.distributor_detail:{created_by:h.a.getLoggedInID()},posting:!1,formValid:!1,typeOptions1:[{value:"2",label:"Master Distributor"},{value:"3",label:"Distributor"},{value:"4",label:"Agent"}],typeOptions2:[{value:"3",label:"Distributor"},{value:"4",label:"Agent"}],typeOptions3:[{value:"4",label:"Agent"}]},l}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getStateList()}},{key:"render",value:function(){var e=this,a=this.state,t=a.add,n=a.formValid,l=(a.posting,a.backDisable);return c.a.createElement("div",{className:"mt-4 distributor"},c.a.createElement(o.a,null,c.a.createElement(m.a,{md:12},c.a.createElement("h1",{className:"h1-cls"},"Create New"))),c.a.createElement("div",{className:"animated fadeIn new-banner"},c.a.createElement(o.a,null,c.a.createElement(m.a,{md:4,className:"input-row"},c.a.createElement("label",{for:"site_rake",className:"inputlabel"},"Full Name"),c.a.createElement(d.a,{type:"text",name:"fullname",placeholder:"Full Name",onChange:this.handleChange,value:f.a.isEmpty(t.fullname)||f.a.isUndefined(t.fullname)?"":t.fullname,className:"input"})),c.a.createElement(m.a,{md:4,className:"input-row"},c.a.createElement("label",{for:"site_rake",className:"inputlabel"},"Email"),c.a.createElement(d.a,{type:"text",name:"email",placeholder:"Email",readOnly:t.admin_id,onChange:this.handleChange,value:t.email,className:"input"})),c.a.createElement(m.a,{md:4,className:"input-row"},c.a.createElement("label",{for:"site_rake",className:"inputlabel"},"Mobile Number"),c.a.createElement(d.a,{type:"number",name:"mobile",placeholder:"Mobile",onChange:this.handleChange,value:t.mobile,readOnly:t.admin_id,maxLength:11,className:"input"}))),c.a.createElement(o.a,null,c.a.createElement(m.a,{md:4,className:"input-row"},c.a.createElement("label",{for:"site_rake",className:"inputlabel"},"Address"),c.a.createElement(d.a,{type:"text",name:"address",placeholder:"Address",onChange:this.handleChange,value:t.address,className:"input"})),c.a.createElement(m.a,{md:4,className:"input-row"},c.a.createElement("label",{for:"site_rake",className:"inputlabel"},"City"),c.a.createElement(d.a,{type:"text",name:"city",placeholder:"City",onChange:this.handleChange,value:f.a.isEmpty(t.city)||f.a.isUndefined(t.city)?"":t.city,className:"input"})),c.a.createElement(m.a,{md:4,className:"input-row"},c.a.createElement("label",{for:"site_rake",className:"inputlabel"},"State"),c.a.createElement(y.a,{isSearchable:!0,className:"input",options:this.state.stateList,placeholder:"Select State",value:t.state_id,onChange:function(a){return e.handleSelectStateChange(a)},getOptionLabel:function(e){return"".concat(e.name)}}))),c.a.createElement(o.a,null,c.a.createElement(m.a,{md:4,className:"input-row"},c.a.createElement("label",{for:"site_rake",className:"inputlabel"},"Type"),c.a.createElement(y.a,{isSearchable:!0,className:"input",options:1==h.a.getRole()?this.state.typeOptions1:2==h.a.getRole()?this.state.typeOptions2:this.state.typeOptions3,placeholder:"Select Type",value:t.role,onChange:function(a){return e.handleSelectChange(a)}})),c.a.createElement(m.a,{md:4,className:"input-row"},c.a.createElement("label",{for:"site_rake",className:"inputlabel"},"Commission %"),c.a.createElement(d.a,{type:"number",name:"commission_percent",placeholder:"Commission",onChange:this.handleChange,value:t.commission_percent,className:"input"}))),c.a.createElement(m.a,{md:12,className:"banner-action"},c.a.createElement(u.a,{disabled:!n,className:"btn-secondary mr-3",onClick:function(){return e.add()}},"Save"),c.a.createElement(u.a,{disabled:l,className:"btn-secondary-outline",onClick:function(){return e.goBack()}},"Cancel"))))}}]),t}(r.Component)}}]);
//# sourceMappingURL=199.8328465e.chunk.js.map