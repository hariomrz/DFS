(this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]||[]).push([[216],{959:function(e,t,a){"use strict";a.r(t);var n=a(11),l=a(12),s=a(15),r=a(14),o=a(0),i=a.n(o),c=a(155),m=a(156),d=a(516),u=a(499),p=a(154),f=a(8),h=a(9),v=a(18),E=a(507),g=a.n(E),b=a(511),_=a(565),L=a(514),N=a(10),P=a(157),y=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).getLevelList=function(){l.setState({listPosting:!0});var e=l.state,t=e.PERPAGE,a=e.CURRENT_PAGE,n=(e.isDescOrder,{items_perpage:t,current_page:a,sort_order:"ASC",sort_field:e.sortField});h.a.Rest(f.nk+f.hk,n).then((function(e){e.response_code==f.qk?l.setState({LevelList:e.data?e.data.level_list:[],Total:e.data?e.data.total:"",listPosting:!1}):v.notify.show(f.Ri,"error",3e3)})).catch((function(e){v.notify.show(f.Ri,"error",3e3)}))},l.handleInputChange=function(e,t,a){var n=l.state.LevelList,s=e.target.value,r=t+1;if(Object(N.d)(s)){var o=n[t].level_str+" ending points can not be empty.";v.notify.show(o,"error",3e3)}if(s==n[t].start_point){var i=n[t].level_str+" starting and ending points can not be same.";v.notify.show(i,"error",3e3)}Object(N.a)(n,(function(e,a){n[t].end_point=s,Object(N.f)(n[r])||(n[r].start_point=Number(s)+1)})),l.setState({LevelList:n,formValid:!1})},l.SaveLimit=function(){l.setState({formValid:!0});var e=l.state.LevelList,t=!0,a=[];if(Object(N.a)(e,(function(e){if(Object(N.d)(e.end_point)){var n=e.level_str+" ending points can not be empty.";v.notify.show(n,"error",3e3),t=!1}else if(e.end_point==e.start_point){var l=e.level_str+" starting and ending points can not be same.";v.notify.show(l,"error",3e3),t=!1}if(Number(e.start_point)>Number(e.end_point)){var s=e.level_str+" ending points should be greater than starting points.";v.notify.show(s,"error",3e3),t=!1}a.push({level_number:e.level_number,start_point:e.start_point,end_point:e.end_point})})),!t)return l.setState({formValid:!0}),!1;Object(L.xc)(a).then((function(e){e.response_code==f.qk?(l.setState({formValid:!0}),v.notify.show(e.message,"success",5e3)):v.notify.show(f.Ri,"error",5e3)})).catch((function(e){v.notify.show(f.Ri,"error",5e3)}))},l.GoToLevels=function(){l.props.history.push({pathname:"add-level",state:""})},l.deleteToggle=function(e,t){l.setState((function(a){return{deleteIndex:t,LEV_ID:e,DeleteModalOpen:!a.DeleteModalOpen}}))},l.deleteLevel=function(){l.setState({DeletePosting:!0});var e=l.state,t=e.deleteIndex,a={level_pt_id:e.LEV_ID},n=e.LevelList;Object(L.qc)(a).then((function(e){e.response_code===f.qk&&(Object(N.g)(n,(function(e,a){return a==t})),v.notify.show(e.message,"success",5e3),l.setState({LevelList:n,DeletePosting:!1,DeleteModalOpen:!1}))})).catch((function(e){v.notify.show(f.Ri,"error",5e3)}))},l.state={PERPAGE:f.Vf,CURRENT_PAGE:1,start_point:"",end_point:"",LevelList:[],formValid:!0,sortField:"level_number",isDescOrder:"false",setDefPost:!1,LevelSelected:"",DeleteModalOpen:!1,DeletePosting:!1,listPosting:!1},l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){"0"==N.i.allowXpPoints()&&(v.notify.show(f.og,"error",5e3),this.props.history.push("/dashboard")),this.getLevelList()}},{key:"handlePageChange",value:function(e){var t=this;e!==this.state.CURRENT_PAGE&&this.setState({CURRENT_PAGE:e},(function(){t.getLevelList()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.LevelList,n=t.CURRENT_PAGE,l=t.PERPAGE,s=t.Total,r=t.formValid,o=t.DeleteModalOpen,h=t.DeletePosting,v=t.listPosting,E={publishModalOpen:o,publishPosting:h,modalActionNo:this.deleteToggle,modalActionYes:this.deleteLevel,MainMessage:b.ac,SubMessage:b.bc};return i.a.createElement("div",{className:"edit-level animated fadeIn"},o&&i.a.createElement(_.a,E),i.a.createElement(c.a,{className:"level-sub-header mb-20"},i.a.createElement(m.a,{xs:6},i.a.createElement("h2",{className:"animate-left"},"Edit Levels:")),i.a.createElement(m.a,{xs:6},i.a.createElement("span",{onClick:function(){return e.GoToLevels()},className:"animate-right"}," ",i.a.createElement("i",{className:"icon-Shape"})," Back to Levels"))),i.a.createElement("div",{className:"white-container xanimate-left"},i.a.createElement(c.a,null,i.a.createElement(m.a,{md:12,className:"table-responsive common-table"},i.a.createElement(d.a,null,i.a.createElement("thead",{className:"height-40"},i.a.createElement("tr",null,i.a.createElement("th",{className:"cursor-default"},"Level's (Not Editable)"),i.a.createElement("th",{className:"text-center cursor-default"},"Starting Points"),i.a.createElement("th",{className:"text-center cursor-default"},"Ending Points"),i.a.createElement("th",{className:"text-center cursor-default"}))),s>0?Object(N.a)(a,(function(t,n){return i.a.createElement("tbody",{key:n},i.a.createElement("tr",null,i.a.createElement("td",null,t.level_str),i.a.createElement("td",null,i.a.createElement("div",{className:"input-box p-0"},i.a.createElement(u.a,{className:"form-control disable",type:"number",name:"start_point",value:t.start_point,disabled:!0}))),i.a.createElement("td",null,i.a.createElement("div",{className:"input-box p-0"},i.a.createElement(u.a,{className:"form-control",type:"number",name:"end_point",value:t.end_point,onChange:function(t){return e.handleInputChange(t,n,"end_point")}}))),i.a.createElement("td",null,n==a.length-1&&i.a.createElement("a",{className:"pointer",onClick:function(){return e.deleteToggle(t.level_pt_id,n)}},i.a.createElement("i",{className:"icon-delete"})))))})):i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"22"},0!=s||v?i.a.createElement(P.a,null):i.a.createElement("div",{className:"no-records"},f.Cg))))))),i.a.createElement(c.a,{className:"text-center mt-5 pb-4"},i.a.createElement(m.a,{md:12},i.a.createElement(p.a,{disabled:r,className:"btn-secondary-outline mr-3",onClick:function(){return e.SaveLimit()}},"Update Level")))),s>l&&i.a.createElement("div",{className:"custom-pagination lobby-paging"},i.a.createElement(g.a,{activePage:n,itemsCountPerPage:l,totalItemsCount:s,pageRangeDisplayed:5,onChange:function(t){return e.handlePageChange(t)}})))}}]),a}(o.Component);t.default=y}}]);
//# sourceMappingURL=216.8c2df0c4.chunk.js.map