(this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]||[]).push([[193],{868:function(e,a,t){"use strict";t.r(a);var n=t(59),l=t(11),r=t(12),s=t(15),i=t(14),o=t(0),c=t.n(o),m=t(155),d=t(156),g=t(516),u=t(499),p=t(154),E=t(8),h=t(9),f=t(18),P=t(23),_=t.n(P),v=t(5),b=t.n(v),C=t(819),y=t.n(C),N=(t(820),t(821),t(822),t(823),t(10)),w=t(158),k=function(e){Object(s.a)(t,e);var a=Object(i.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).handleLangChange=function(e){r.setState({LanguageType:e.value},(function(){r.getPageDetails()}))},r.handleNameChange=function(e){var a=e.target.name,t=e.target.value;r.setState(Object(n.a)({},a,t),(function(){r.validateForm()}))},r.onContentChange=function(e){r.setState({PageContent:e},(function(){r.validateForm()}))},r.onImageUpload=function(e){var a=new FileReader;a.onloadend=function(){y.a.insertImage(a.result)},a.readAsDataURL(e[0])},r.validateForm=function(){var e=r.state,a=e.PageTitle,t=e.PageContent;a?r.setState({TitleError:!1}):r.setState({TitleError:!0}),t?r.setState({ContentError:!1}):r.setState({ContentError:!0}),a&&t?r.setState({EditPagePosting:!1}):r.setState({EditPagePosting:!0})},r.updatePage=function(){var e=r.state,a=e.PageId,t=e.PageTitle,n=e.PageContent,l=e.MetaKeyword,s=e.MetaDesc,i=e.LanguageType;r.setState({EditPagePosting:!0});var o={page_id:a,page_title:t,page_alias:t.replace(/ /g,"_"),meta_keyword:l,meta_desc:s,page_url:t.replace(/ /g,"_"),page_content:n,status:"1",modified_by:"0",added_date:_()().format("YYYY-MM-DD h:mm:ss"),modified_date:_()().format("YYYY-MM-DD h:mm:ss"),language:i};h.a.Rest(E.nk+E.lj,o).then((function(e){e.response_code===E.qk&&(f.notify.show(e.message,"success",5e3),r.editContent(!1),r.setState({EditPagePosting:!1},(function(){this.getPages()})))})).catch((function(e){f.notify.show(E.Ri,"error",5e3)}))},r.state={PagesList:[],TotalRecord:0,editView:!1,EditPagePosting:!1,TitleError:!1,ContentError:!1,PageTitle:"",PageContent:"",MetaKeyword:"",MetaDesc:"",LanguageType:"en",PageId:"",languageOptions:N.i.getLanguageData()?N.i.getLanguageData():[],SummernoteView:!0},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.getPages()}},{key:"getPages",value:function(){var e=this,a=this.state,t={items_perpage:a.PERPAGE,total_items:0,current_page:a.CURRENT_PAGE,sort_order:"ASC",sort_field:"page_title"};h.a.Rest(E.nk+E.Le,t).then((function(a){a.response_code===E.qk&&e.setState({PagesList:a.data.result,TotalRecord:a.data.total})})).catch((function(e){f.notify.show(E.Ri,"error",5e3)}))}},{key:"editContent",value:function(e,a,t){var n=this;"contact_us"===t&&this.props.history.push("/cms/about-us/"+a),"faq"===t?this.props.history.push("/cms/faq/"+a):this.setState({editView:e,PageId:a,SummernoteView:!1},(function(){a&&n.getPageDetails()}))}},{key:"getPageDetails",value:function(){var e=this,a=this.state,t=a.LanguageType,n={page_id:a.PageId,language:t};h.a.Rest(E.nk+E.Me,n).then((function(a){if(a.response_code===E.qk){var t=a.data;e.setState({PageTitle:t.page_title?t.page_title:"",PageContent:t.page_content?t.page_content:"",MetaKeyword:t.meta_keyword?t.meta_keyword:"",MetaDesc:t.meta_desc?t.meta_desc:"",SummernoteView:!0})}})).catch((function(e){f.notify.show(E.Ri,"error",5e3)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.languageOptions,n=a.PagesList,l=a.TotalRecord,r=a.editView,s=a.EditPagePosting,i=a.TitleError,E=a.ContentError,f=a.PageTitle,P=a.PageContent,_=a.LanguageType,v=a.SummernoteView,C={is_disabled:!1,is_searchable:!0,is_clearable:!1,menu_is_open:!1,class_name:"",sel_options:t,place_holder:"Select Language",selected_value:_,modalCallback:this.handleLangChange};return c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:"mt-4 app-banner"},c.a.createElement(m.a,null,c.a.createElement(d.a,{md:12},c.a.createElement("h1",{className:"h1-cls"},"Manage Pages"))),!r&&c.a.createElement("div",{className:"cms-list-view"},c.a.createElement(m.a,{className:"filters-box"},c.a.createElement(d.a,{md:12},c.a.createElement("div",{className:"filters-area"},c.a.createElement("h4",{className:"m-0"},"Total Record Count : ",l)))),c.a.createElement(m.a,{className:"animated fadeIn mt-4"},c.a.createElement(d.a,{md:12,className:"table-responsive common-table"},c.a.createElement(g.a,null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"left-th pl-4"},"Title"),c.a.createElement("th",null,"Alias"),c.a.createElement("th",null,"Updated Date"),c.a.createElement("th",null,"Action"))),b.a.map(n,(function(a,t){return c.a.createElement("tbody",{key:t},c.a.createElement("tr",null,c.a.createElement("td",{className:"left-th pl-4"},a.page_title),c.a.createElement("td",null,a.page_alias),c.a.createElement("td",null,h.a.getUtcToLocalFormat(a.modified_date,"D-MMM-YYYY hh:mm A")),c.a.createElement("td",null,c.a.createElement("i",{onClick:function(){return e.editContent(!0,a.page_id,a.page_alias)},className:"icon-edit cursor-pointer"}))))})))))),r&&c.a.createElement("div",{className:"cms-page-view"},c.a.createElement(m.a,null,c.a.createElement(d.a,{md:12},c.a.createElement("div",{className:"edit-title"},"Edit Page"))),c.a.createElement("div",{className:"animated fadeIn new-banner mt-0"},c.a.createElement(d.a,{md:12,className:"input-row"},c.a.createElement(m.a,null,c.a.createElement(d.a,{md:3,className:"b-input-label"},"Select Language",c.a.createElement("span",{className:"asterrisk"},"*")),c.a.createElement(d.a,{md:9},c.a.createElement(w.a,{SelectProps:C})))),c.a.createElement(d.a,{md:12,className:"input-row"},c.a.createElement(m.a,null,c.a.createElement(d.a,{md:3,className:"b-input-label"},"Title",c.a.createElement("span",{className:"asterrisk"},"*")),c.a.createElement(d.a,{md:9},c.a.createElement(u.a,{type:"text",name:"PageTitle",placeholder:"Title",onChange:this.handleNameChange,value:f}),i&&c.a.createElement("span",{className:"error-text"},"Title field can not be empty")))),c.a.createElement(d.a,{md:12,className:"input-row"},c.a.createElement(m.a,null,c.a.createElement(d.a,{md:3,className:"b-input-label"},"Content",c.a.createElement("span",{className:"asterrisk"},"*")),c.a.createElement(d.a,{md:9},c.a.createElement(y.a,{value:v?P:"",onChange:this.onContentChange,onImageUpload:this.onImageUpload,options:{height:250,toolbar:[["color",["color"]],["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture"]],["view",["codeview"]]]}}),E&&c.a.createElement("span",{className:"error-text"},"Content field can not be empty")))),c.a.createElement(d.a,{md:12,className:"banner-action"},c.a.createElement(p.a,{disabled:s,className:"btn-secondary mr-3",onClick:function(){return e.updatePage()}},"Save Page"),c.a.createElement(p.a,{className:"btn-secondary-outline",onClick:function(){return e.editContent(!1)}},"Cancel"))))))}}]),t}(o.Component);a.default=k}}]);
//# sourceMappingURL=193.f431b338.chunk.js.map