(this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]||[]).push([[158],{513:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),o=a.n(n),i=a(523),c=a.n(i),s=a(9);function r(e){var t=e.data,a=t.date,n=t.format;return a?o.a.createElement(c.a,{date:s.a.getUtcToLocal(a),format:n}):""}},561:function(e,t,a){"use strict";a.d(t,"l",(function(){return n})),a.d(t,"k",(function(){return o})),a.d(t,"q",(function(){return i})),a.d(t,"p",(function(){return c})),a.d(t,"w",(function(){return s})),a.d(t,"x",(function(){return r})),a.d(t,"o",(function(){return l})),a.d(t,"g",(function(){return m})),a.d(t,"a",(function(){return d})),a.d(t,"f",(function(){return u})),a.d(t,"m",(function(){return _})),a.d(t,"y",(function(){return p})),a.d(t,"h",(function(){return f})),a.d(t,"n",(function(){return g})),a.d(t,"z",(function(){return h})),a.d(t,"d",(function(){return b})),a.d(t,"e",(function(){return E})),a.d(t,"r",(function(){return y})),a.d(t,"b",(function(){return v})),a.d(t,"u",(function(){return N})),a.d(t,"t",(function(){return x})),a.d(t,"i",(function(){return C})),a.d(t,"s",(function(){return S})),a.d(t,"c",(function(){return P})),a.d(t,"A",(function(){return w})),a.d(t,"j",(function(){return k})),a.d(t,"C",(function(){return j})),a.d(t,"B",(function(){return R})),a.d(t,"H",(function(){return O})),a.d(t,"I",(function(){return D})),a.d(t,"G",(function(){return M})),a.d(t,"E",(function(){return T})),a.d(t,"F",(function(){return F})),a.d(t,"v",(function(){return A})),a.d(t,"D",(function(){return L}));var n="adminapi/communication_dashboard/user_segmentation/get_filter_result_test",o="adminapi/communication_dashboard/user_segmentation/get_deposit_promocodes",i="adminapi/communication_dashboard/user_segmentation/get_segementation_template_list",c="adminapi/communication_dashboard/user_segmentation/get_recent_communication_list",s="adminapi/communication_dashboard/user_segmentation/notify_by_selection",r="adminapi/communication_dashboard/user_segmentation/notify_by_selection_counts",l="adminapi/communication_dashboard/user_segmentation/get_recent_communication_detail",m="adminapi/communication_dashboard/user_segmentation/get_cd_balance",d="adminapi/communication_dashboard/user_segmentation/add_notify_entity",u="adminapi/communication_dashboard/user_segmentation/export_filter_data",_="adminapi/communication_dashboard/new_campaign/get_live_upcoming_fixtures",p="adminapi/communication_dashboard/new_campaign/render_cd_body",f="adminapi/communication_dashboard/user_segmentation/get_city_names",g="adminapi/communication_dashboard/user_segmentation/get_preference_list",h="adminapi/communication_dashboard/user_segmentation/update_preference_list",b="adminapi/communication_dashboard/user_segmentation/create_user_base_list",E="adminapi/communication_dashboard/user_segmentation/delete_user_base_list",y="adminapi/communication_dashboard/user_segmentation/get_single_user_base_list",v="adminapi/communication_dashboard/user_segmentation/create_new_category",N="adminapi/communication_dashboard/user_segmentation/get_user_count",x="adminapi/communication_dashboard/user_segmentation/get_user_base_list",C="adminapi/communication_dashboard/user_segmentation/get_custome_template",S="adminapi/communication_dashboard/user_segmentation/get_template_category",P="adminapi/communication_dashboard/user_segmentation/create_new_template",w="adminapi/communication_dashboard/user_segmentation/update_user_base_list",k="adminapi/communication_dashboard/user_segmentation/get_delayed_fixtures",j="SMS",R="VtechAdmin",O={1:{all_user:1,text:"All User"},2:{login:1,text:"Login"},3:{signup:1,text:"Signup"},4:{fixture_participation:1,text:"By Fixture Participation"}},D={1:{all_user:1},2:{login:1},3:{signup:1},4:{fixture_participation:1}},M={121:"contest_id",120:"promo_code_id",124:"season_game_uid",131:"season_game_uid",132:"season_game_uid"},T={email_fixture_model:"email",message_fixture_model:"message",notification_fixture_model:"notification"},F=[{label:"Lobby",value:1},{label:"Wallet",value:2},{label:"My Profile",value:3},{label:"My contests",value:4},{label:"Refer a Friend",value:5},{label:"Contest Listing",value:6},{label:"Add Fund",value:7}],A=[{id:"1",name:"Male"},{id:"2",name:"Female"},{id:"3",name:"Other"}],L=function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}},973:function(e,t,a){"use strict";a.r(t);var n=a(550),o=a(24),i=a(11),c=a(12),s=a(82),r=a(15),l=a(14),m=a(0),d=a.n(m),u=a(107),_=a(155),p=a(156),f=a(154),g=a(497),h=a(504),b=a(516),E=a(844),y=a(845),v=a(846),N=a(539),x=a(543),C=a(538),S=a(503),P=a(501),w=a(502),k=a(553),j=a(554),R=a(499),O=(a(523),a(5)),D=a.n(O),M=a(8),T=a(561),F=a(9),A=a(23),L=a.n(A),I=a(69),Y=a.n(I),B=a(46),q=a(18),H=a(3),V=a.n(H),z=a(522),U=a.n(z),G=a(230),J=a(79),W=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleFixtureNotificationType=function(e){var t=e.target.value,a=e.target.id,o=D.a.cloneDeep(n.state.fixturePromoteParam);o[T.E[a]]="false"==t,o[a]="false"==t,n.setState({fixturePromoteParam:o},(function(){console.log("this.state.fixturePromoteParam:",n.state.fixturePromoteParam),n.get_fixture_cd_type_possible_counts(n.state.fixturePromoteParam)}))},n.get_fixture_cd_type_possible_counts=function(e){var t=T.D(e,T.H[1]);t.email_template_id=4,F.a.Rest(M.nk+T.x,t).then((function(e){e.response_code===M.qk&&n.setState({FixtureData:Object(o.a)(Object(o.a)({},n.state.FixtureData),{},{email_count:e.data.email_count,notification_count:e.data.notification_count,sms_count:e.data.sms_count})})}))},n.fixtureNotifyBySelection=function(e){var t=Object(o.a)(Object(o.a)({},n.state.fixturePromoteParam),{},{season_game_uid:e});console.log("param:::::",t),F.a.Rest(M.nk+T.w,t).then((function(e){n.setState({posting:!1}),e.response_code===M.qk?(n.setState({fixture_promote_model:!1}),q.notify.show(e.message,"success",3e3),n.props.IsPromoteFixtureHide()):e.response_code==M.ok&&n.props.history.push("/401")}))},n.toggleFixturePromoteModal=function(e,t){n.setState({fixture_promote_model:!n.state.fixture_promote_model}),n.props.IsPromoteFixtureHide()},n.state={fixturePromoteParam:{email_fixture_model:!1,message_fixture_model:!1,notification_fixture_model:!1},cd_balance:{},fixture_promote_model:n.props.IsPromoteFixtureShow||!1,FixtureData:n.props.FixtureData?Object(o.a)(Object(o.a)({},n.props.FixtureData.fixtureObj),{},{email_count:0,sms_count:0,notification_count:0}):{}},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.IsFixturePromoteHide,a=this.state,n=a.fixturePromoteParam,o=a.FixtureData;return d.a.createElement(N.a,{isOpen:this.state.fixture_promote_model,toggle:this.toggleFixturePromoteModal,className:this.props.className},d.a.createElement(x.a,{toggle:t,className:"resend"},d.a.createElement(p.a,{lg:12},d.a.createElement("h5",{className:"resend title"}," PROMOTE"))),d.a.createElement(C.a,null,d.a.createElement(_.a,{className:"usertime"},d.a.createElement(p.a,{lg:12,className:"resendvs"},d.a.createElement(p.a,{className:"img1"},d.a.createElement("img",{Style:"width:58px; height:58px;",src:o.home_flag})),d.a.createElement(p.a,{className:"resendvsmatch"},d.a.createElement("h3",{Style:"font-size:18px;font-weight:bold;color: #000000;"},o.home," vs ",o.away," "),d.a.createElement("h6",{Style:"font-size:12px;font-weight:bold;color: #000000;"},o.season_scheduled_date)),d.a.createElement(p.a,{className:"img2"}," ",d.a.createElement("img",{Style:"width:58px; height:58px; ",src:o.away_flag})))),d.a.createElement(_.a,{className:"communication"},d.a.createElement(p.a,{lg:12},d.a.createElement("div",{className:"comchannel"},"Communication Channel"),d.a.createElement("div",{className:"customcontrol"},d.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline"},d.a.createElement(R.a,{type:"checkbox",id:"email_fixture_model",className:"custom-control-input",onChange:this.handleFixtureNotificationType,checked:n.email_fixture_model,value:n.email_fixture_model}),d.a.createElement("label",{className:"custom-control-label",for:"email_fixture_model"},"E-MAIL")),d.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline"},d.a.createElement(R.a,{type:"checkbox",id:"message_fixture_model",className:"custom-control-input",onChange:this.handleFixtureNotificationType,checked:n.message_fixture_model,value:n.message_fixture_model}),d.a.createElement("label",{className:"custom-control-label",for:"message_fixture_model"},"SMS")),d.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline"},d.a.createElement(R.a,{type:"checkbox",id:"notification_fixture_model",className:"custom-control-input",onChange:this.handleFixtureNotificationType,checked:n.notification_fixture_model,value:n.notification_fixture_model}),d.a.createElement("label",{className:"custom-control-label",for:"notification_fixture_model"},"Notification"))))),d.a.createElement(p.a,null,d.a.createElement(_.a,{className:"select preview"}),d.a.createElement(_.a,{className:"popcardrow"},d.a.createElement(p.a,{md:4},d.a.createElement(g.a,{className:"popcard"},d.a.createElement("h6",{className:"popcard6"},"E-MAIL"),d.a.createElement("h2",{className:"popcard8"}," ",this.state.FixtureData.email_count))),d.a.createElement(p.a,{md:4},d.a.createElement(g.a,{className:"popcard"},d.a.createElement("h6",{className:"popcard6"},"SMS"),d.a.createElement("h2",{className:"popcard8"},this.state.FixtureData.sms_count))),d.a.createElement(p.a,{md:4},d.a.createElement(g.a,{className:"popcard"},d.a.createElement("h6",{className:"popcard6"},"Notification"),d.a.createElement("h2",{className:"popcard8"},this.state.FixtureData.notification_count))))),d.a.createElement(_.a,null,d.a.createElement(p.a,{lg:12,className:"resend"},d.a.createElement(f.a,{className:"resendbtnpop",outline:!0,disabled:!n.email_template_id,color:"danger",onClick:function(){return e.fixtureNotifyBySelection(o.season_game_uids)}},"Send")))))}}]),a}(d.a.Component),K=a(10),Q=a(513),X=a(160),Z=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var c;return Object(i.a)(this,a),(c=t.call(this,e)).getDepositPromotionsPromocodes=function(){F.a.Rest(M.nk+T.k,{}).then((function(e){e.response_code===M.qk?c.setState({depositPromocodes:e.data.promocodes}):e.response_code==M.ok?c.props.history.push("/login"):c.setState({posting:!1})}))},c.buySms=function(){if(c.state.isLoading)return!1;var e={type:c.state.buy_current_entity,value:c.state.notify_sms_value,amount:c.state.notify_sms_amount,entity_name:"SMS"};c.setState({isLoading:!0}),F.a.Rest(M.nk+T.a,e).then((function(t){c.setState({isLoading:!1}),t.response_code===M.qk?(c.setState({buy_sms_modal:!1,cd_balance:t.data.cd_balance,notify_entity_value:null}),c.props.updateSmsBalance(e.value),q.notify.show(t.message,"success",5e3)):t.response_code==M.ok&&c.props.history.push("/login")}))},c.buyNotification=function(){if(c.state.isLoading)return!1;var e={type:c.state.buy_current_entity,value:c.state.notify_notification_value,amount:c.state.notify_notification_amount,entity_name:"Notification"};c.setState({isLoading:!0}),F.a.Rest(M.nk+T.a,e).then((function(t){c.setState({isLoading:!1}),t.response_code===M.qk?(c.setState({buy_notification_modal:!1,cd_balance:t.data.cd_balance,notify_entity_value:null}),c.props.updateNotificationBalance(e.value),q.notify.show(t.message,"success",5e3)):t.response_code==M.ok&&c.props.history.push("/login")}))},c.buyNotifyEntity=function(){if(c.state.isLoading)return!1;var e={type:c.state.buy_current_entity,value:c.state.notify_entity_value,amount:c.state.notify_email_amount,entity_name:"Email"};c.setState({isLoading:!0}),F.a.Rest(M.nk+T.a,e).then((function(t){c.setState({isLoading:!1}),t.response_code===M.qk?(c.setState({buy_communication_entity_modal:!1,cd_balance:t.data.cd_balance,notify_entity_value:null}),c.props.updateEmailBalance(e.value),q.notify.show(t.message,"success",5e3)):t.response_code==M.ok&&c.props.history.push("/login")}))},c.notifyEntityValueChange=function(e){c.setState({notify_entity_value:e.target.value,notify_email_amount:c.state.notify_email_price*e.target.value})},c.notifySMSValueChange=function(e){c.setState({notify_sms_value:e.target.value,notify_sms_amount:c.state.notify_sms_price*e.target.value})},c.notifyNotificationValueChange=function(e){c.setState({notify_notification_value:e.target.value,notify_notification_amount:c.state.notify_notification_price*e.target.value})},c.handleNotificationType=function(e){var t=e.target.value,a=e.target.id,n=D.a.cloneDeep(c.state.notificationData);n[a]="false"==t,c.setState({notificationData:n},(function(){c.get_cd_type_possible_counts(c.state.notificationData)}))},c.handleFixtureNotificationType=function(e){var t=e.target.value,a=e.target.id,n=D.a.cloneDeep(c.state.fixturePromoteParam);n[T.E[a]]="false"==t,n[a]="false"==t,c.setState({fixturePromoteParam:n},(function(){c.get_fixture_cd_type_possible_counts(c.state.fixturePromoteParam)}))},c.sortRecentComminications=function(e){var t="DESC";e==c.state.recentCommunicationParams.sort_field&&(t="DESC"==c.state.recentCommunicationParams.sort_order?"ASC":"DESC"),c.setState({recentCommunicationParams:Object(o.a)(Object(o.a)({},c.state.recentCommunicationParams),{},{sort_order:t,sort_field:e})},(function(){c.getRecentCommunication()}))},c.getUtcToLocal=function(e){return L.a.utc(e).local().format()},c.getFormatedDate=function(e){return L()(e).format("LLLL")},c.toggleRecentCModal=function(e,t){var a="1";if(D.a.isEmpty(t)||D.a.isUndefined(t.template_name)||("custom-sms"==t.template_name&&(a="2"),"custom-notification"==t.template_name&&(a="3")),c.setState({activeTab:a,communication_review_modal:!c.state.communication_review_modal}),!t)return!1;F.a.Rest(M.nk+T.o,{recent_communication_id:t.recent_communication_id}).then((function(e){if(e.response_code===M.qk){var t=e.data.recent_communication_detail.email_body;t=(t=(t=(t=(t=(t=t.replace("{{offer_percentage}}",10)).replace("{{promo_code}}","FIRSTDEPOSIT")).replace("{{amount}}",10)).replace("{{year}}",(new Date).getFullYear())).replace("{{SITE_TITLE}}","Fantasy Sports")).replace("{{contest_name}}","Demo"),c.setState({RC_obj_detail:Object(o.a)(Object(o.a)({},e.data.recent_communication_detail),{},{email_body:t})})}else e.response_code==M.ok&&c.props.history.push("/login")}))},c.toggleFixturePromoteModal=function(e,t){var a=L()(F.a.getUtcToLocal(t.season_scheduled_date)).format("D-MMM-YYYY hh:mm A"),n={email_template_id:4};n.season_game_uid=t.season_game_uid,n.all_user=1,n.for_str="for "+t.home+" vs "+t.away+" ("+a+")";var o=U.a.stringify(n);return c.props.history.push("/marketing/new_campaign?".concat(o)),!1},c.PromoteFixtureHide=function(){c.setState({fixture_promote_model:!1})},c.PromoteFixtureShow=function(){c.setState({fixture_promote_model:!0})},c.get_fixture_cd_type_possible_counts=function(e){var t=T.D(e,T.H[1]);t.email_template_id=4,F.a.Rest(M.nk+T.x,t).then((function(e){e.response_code===M.qk&&c.setState({fixtureObj:Object(o.a)(Object(o.a)({},c.state.fixtureObj),{},{email_count:e.data.email_count,notification_count:e.data.notification_count,sms_count:e.data.sms_count})},(function(){}))}))},c.toggleCResendCModal=function(e,t){var a={};t.email_count&&t.email_count>0&&(a.email=!0),t.sms_count&&t.sms_count>0&&(a.message=!0),t.notification_count&&t.notification_count>0&&(a.notification=!0),t.cd_email_template_id&&(a.email_template_id=t.cd_email_template_id),T.G[t.notification_type]&&(a[T.G[t.notification_type]]=t.source_id),a=Object(o.a)(Object(o.a)({},a),T.I[t.userbase]);var n=U.a.stringify(a);return c.props.history.push("/marketing/new_campaign?".concat(n)),!1},c.getSegmentationTemplate=function(e){var t={};e.cd_email_template_id&&(t.cd_email_template_id=e.cd_email_template_id),F.a.Rest(M.nk+T.q,t).then((function(t){if(t.response_code===M.qk){var a=[];t.data.result.map((function(e,t){return a.push({value:e.cd_email_template_id,label:e.display_label,detail:e}),""})),c.setState({templateList:a}),c.setState({notificationData:Object(o.a)(Object(o.a)({},c.state.notificationData),{},{email_template_id:e.cd_email_template_id})})}else t.response_code==M.ok?c.props.history.push("/login"):c.setState({posting:!1})}))},c.notifyBySelection=function(){c.setState({communication_resend_modal:!0});var e=T.D(c.state.notificationData,T.H[c.state.notificationData.userbase]),t=Object(o.a)({},e);F.a.Rest(M.nk+T.w,t).then((function(e){e.response_code===M.qk?q.notify.show(e.message,"success",5e3):e.response_code==M.ok?c.props.history.push("/login"):c.setState({posting:!1})}))},c.fixtureNotifyBySelection=function(e){var t=Object(o.a)(Object(o.a)({},c.state.fixturePromoteParam),{},{season_game_uid:e});F.a.Rest(M.nk+T.w,t).then((function(e){c.setState({posting:!1}),e.response_code===M.qk?(c.setState({fixture_promote_model:!1}),q.notify.show(e.message,"success",5e3)):e.response_code==M.ok&&c.props.history.push("/login")}))},c.get_cd_type_possible_counts=function(e){var t=T.D(e,T.H[c.state.Resend_obj_detail.userbase]);t.from_date=c.state.Resend_obj_detail.from_date,t.to_date=c.state.Resend_obj_detail.to_date,F.a.Rest(M.nk+T.x,e).then((function(e){e.response_code===M.qk&&c.setState({Resend_obj_detail:Object(o.a)(Object(o.a)({},c.state.Resend_obj_detail),{},{email_count:e.data.email_count,notification_count:e.data.notification_count,sms_count:e.data.sms_count})})}))},c.handlePromocodeChange=function(e){var t=e.value;c.setState({notificationData:Object(o.a)(Object(o.a)({},c.state.notificationData),{},{promo_code_id:t})})},c.handleChange=function(e){if(!e)return c.setState({notificationData:{}}),!1;var t=e.value;e&&e.detail&&"promotion-for-deposit"===e.detail.template_name?c.setState({notificationData:Object(o.a)(Object(o.a)({},c.state.notificationData),{},{email_template_id:t,promo_code_id:""}),depositPromocodes:[]},(function(){c.getDepositPromotionsPromocodes()})):c.setState({depositPromocodes:[],notificationData:Object(o.a)(Object(o.a)({},c.state.notificationData),{},{email_template_id:t,promo_code_id:""})})},c.editSchedule=function(e){var t={};t.email_template_id=c.state.DealCatId,t.all_user=1,t.deal_id=X.Base64.encode(e.deal_id),t.amt=X.Base64.encode(e.amount),t.for_str=" For Deal ";var a=U.a.stringify(t);return c.props.history.push("/marketing/new_campaign?".concat(a)),!1},c.state={selected_sport:Y.a.get("selected_sport")?Y.a.get("selected_sport"):M.pk,modal:!1,recent_communication_list:[],preview_modal:!1,cd_balance:{},communication_review_modal:!1,communication_resend_modal:!1,RC_obj_detail:{},fixtureObj:{email_count:0,sms_count:0,notification_count:0},Resend_obj_detail:{},notificationData:{},fixturePromoteParam:{email_fixture_model:!1,message_fixture_model:!1,notification_fixture_model:!1},templateList:[],userbase:null,recent_communication_id:null,buy_communication_entity_modal:!1,buy_sms_modal:!1,buy_current_entity:null,notify_entity_value:null,notify_sms_value:null,notify_sms_price:.2,notify_sms_amount:0,buy_notification_modal:!1,notify_notification_value:null,notify_notification_price:0,notify_notification_amount:0,isLoading:!1,activeTab:"1",length:9,userBaseType:T.H,fixtures:[],fixture_promote_model:!1,recentCommunicationParams:{currentPage:0,pageSize:10,pagesCount:1,sort_order:"DESC",sort_field:"recent_communication_id"},depositPromocodes:[],notify_email_price:.2,notify_email_amount:0,minPage:1,maxPage:5,fixture_image_path:"",SentCount:[]},c.toggle=c.toggle.bind(Object(s.a)(c)),c.toggle_=c.toggle_.bind(Object(s.a)(c)),c.togglePrimary=c.togglePrimary.bind(Object(s.a)(c)),c.dataSet=Object(n.a)(Array(Math.ceil(500+500*Math.random()))).map((function(e,t){return"Record "+(t+1)})),c.pageSize=50,c.pagesCount=Math.ceil(c.dataSet.length/c.pageSize),c}return Object(c.a)(a,[{key:"handleRecentCommunicationPagination",value:function(e,t){var a=this;e.preventDefault();var n=1,i=5;t>=1&&t<5&&(i=5,n=1),t>=5&&(n=t-2,i=t+2),this.setState({recentCommunicationParams:Object(o.a)(Object(o.a)({},this.state.recentCommunicationParams),{},{currentPage:t}),minPage:n,maxPage:i},(function(){a.getRecentCommunication()}))}},{key:"getRecentCommunication",value:function(){var e=this,t=Object(o.a)(Object(o.a)({},this.state.recentCommunicationParams),{},{sports_id:this.state.selected_sport});F.a.Rest(M.nk+T.p,t).then((function(t){t.response_code===M.qk?(e.setState({recent_communication_list:t.data.recent_communication_list.result,cd_balance:t.data.cd_balance,fixtures:t.data.fixtures&&t.data.fixtures.data&&t.data.fixtures.data.length>0?t.data.fixtures:[],recentCommunicationParams:Object(o.a)(Object(o.a)({},e.state.recentCommunicationParams),{},{pagesCount:Math.ceil(t.data.recent_communication_list.total/10)}),notify_email_price:t.data.CD_ONE_EMAIL_RATE,notify_sms_price:t.data.CD_ONE_SMS_RATE,notify_notification_price:t.data.CD_ONE_NOTIFICATION_RATE,fixture_image_path:t.data.fixture_image_path,SentCount:Object(K.f)(t.data.cd_sent_count)?[]:t.data.cd_sent_count}),e.props.setCdBalance(t.data.cd_balance)):t.response_code==M.ok&&e.props.history.push("/login")}))}},{key:"toggle_",value:function(e){this.state.activeTab!==e&&this.setState({activeTab:e})}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"togglePrimary",value:function(){this.setState({primary:!this.state.primary})}},{key:"componentDidMount",value:function(){this.getRecentCommunication()}},{key:"render",value:function(){var e=this,t=this.state,a=t.recent_communication_list,o=(t.cd_balance,t.notificationData),i=t.templateList,c=(t.fixtures,t.fixtureObj),s=t.recentCommunicationParams,r=t.minPage,l=t.maxPage,m=t.SentCount;return d.a.createElement("div",{className:"animated fadeIn campaign-dashboard"},d.a.createElement("div",{className:"new campaign"},d.a.createElement(_.a,{className:"commrow"},d.a.createElement(p.a,{sm:6},d.a.createElement("h2",{className:"h2-cls"},"Communication Dashboard")),d.a.createElement(p.a,{sm:6},d.a.createElement(f.a,{className:"btn-secondary-outline btn-new-campaign",onClick:function(){e.props.history.push("new_campaign")}},"New Campaign")))),d.a.createElement(_.a,{className:"remainingsrow"},d.a.createElement(p.a,{md:12},d.a.createElement(g.a,{className:"remainings"},d.a.createElement(p.a,{className:"remainingscol"},d.a.createElement("div",{className:"col-sm-4"},d.a.createElement("h2",{className:"balanceremaning"},Object(K.f)(m.email_sent)?0:m.email_sent),d.a.createElement("label",{className:"labelremaining","text-align":"center"},d.a.createElement("text",{className:"textcls"},"Total emails sent"))),d.a.createElement("div",{className:"col-sm-4"},d.a.createElement("h2",{className:"balanceremaning"},Object(K.f)(m.sms_sent)?0:m.sms_sent),d.a.createElement("label",{className:"labelremaining"},d.a.createElement("text",{className:"textcls"},"Total SMS sent"))),d.a.createElement("div",{className:"col-sm-4"},d.a.createElement("h2",{className:"balanceremaning"},Object(K.f)(m.notification_sent)?0:m.notification_sent),d.a.createElement("label",{className:"labelremaining","align-text":"center"},d.a.createElement("text",{className:"textcls"},"Total notifications sent"))))))),d.a.createElement(_.a,null,d.a.createElement(p.a,{lg:"12"},d.a.createElement("h5",{className:"recom"},"Recent Communication"))),d.a.createElement(_.a,null,d.a.createElement(p.a,{xs:"12",lg:"12"},d.a.createElement(g.a,{className:"recentcom"},d.a.createElement(h.a,null,d.a.createElement(b.a,{responsive:!0,className:"communication-table"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{scope:"col"},d.a.createElement("div",{className:"dropdownuserdetail",onClick:function(){return e.sortRecentComminications("user_details")}},d.a.createElement("button",{className:"btn tbl-btn dropdown-toggle",type:"button",id:"dropdownMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Userbase"),d.a.createElement("i",{className:"user_details"==this.state.recentCommunicationParams.sort_field&&"DESC"==this.state.recentCommunicationParams.sort_order?"fa fa-sort-desc":"user_details"==this.state.recentCommunicationParams.sort_field&&"ASC"==this.state.recentCommunicationParams.sort_order?"fa fa-sort-asc":""}))),d.a.createElement("th",{scope:"col"},d.a.createElement("div",{className:"dropdown",onClick:function(){return e.sortRecentComminications("template_name")}},d.a.createElement("button",{className:"btn tbl-btn dropdown-toggle",type:"button",id:"dropdownMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Templates"),d.a.createElement("i",{className:"template_name"==this.state.recentCommunicationParams.sort_field&&"DESC"==this.state.recentCommunicationParams.sort_order?"fa fa-sort-desc":"template_name"==this.state.recentCommunicationParams.sort_field&&"ASC"==this.state.recentCommunicationParams.sort_order?"fa fa-sort-asc":""}),d.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu"}))),d.a.createElement("th",{scope:"col"},d.a.createElement("div",{className:"dropdown",onClick:function(){return e.sortRecentComminications("email_count")}},d.a.createElement("button",{className:"btn tbl-btn dropdown-toggle",type:"button",id:"dropdownMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Emails"),d.a.createElement("i",{className:"email_count"==this.state.recentCommunicationParams.sort_field&&"DESC"==this.state.recentCommunicationParams.sort_order?"fa fa-sort-desc":"email_count"==this.state.recentCommunicationParams.sort_field&&"ASC"==this.state.recentCommunicationParams.sort_order?"fa fa-sort-asc":""}),d.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu"}))),d.a.createElement("th",{scope:"col"},d.a.createElement("div",{className:"dropdown",onClick:function(){return e.sortRecentComminications("sms_count")}},d.a.createElement("button",{className:"btn tbl-btn dropdown-toggle",type:"button",id:"dropdownMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"SMS"),d.a.createElement("i",{className:"sms_count"==this.state.recentCommunicationParams.sort_field&&"DESC"==this.state.recentCommunicationParams.sort_order?"fa fa-sort-desc":"sms_count"==this.state.recentCommunicationParams.sort_field&&"ASC"==this.state.recentCommunicationParams.sort_order?"fa fa-sort-asc":""}),d.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu"}))),d.a.createElement("th",{scope:"col"},d.a.createElement("div",{className:"dropdown",onClick:function(){return e.sortRecentComminications("notification_count")}},d.a.createElement("button",{className:"btn tbl-btn dropdown-toggle",type:"button",id:"dropdownMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Notification"),d.a.createElement("i",{className:"notification_count"==this.state.recentCommunicationParams.sort_field&&"DESC"==this.state.recentCommunicationParams.sort_order?"fa fa-sort-desc":"notification_count"==this.state.recentCommunicationParams.sort_field&&"ASC"==this.state.recentCommunicationParams.sort_order?"fa fa-sort-asc":""}),d.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu"}))),d.a.createElement("th",{scope:"col"},d.a.createElement("div",{className:"dropdown"},"Delivered",d.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu"}))),d.a.createElement("th",{scope:"col"},d.a.createElement("div",{className:"dropdown"},"Viewed",d.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu"}))),d.a.createElement("th",{scope:"col"},d.a.createElement("div",{className:"dropdown",onClick:function(){return e.sortRecentComminications("added_date")}},d.a.createElement("button",{className:"btn tbl-btn dropdown-toggle",type:"button",id:"dropdownMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"DateTime"),d.a.createElement("i",{className:"added_date"==this.state.recentCommunicationParams.sort_field&&"DESC"==this.state.recentCommunicationParams.sort_order?"fa fa-sort-desc":"added_date"==this.state.recentCommunicationParams.sort_field&&"ASC"==this.state.recentCommunicationParams.sort_order?"fa fa-sort-asc":""}),d.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu"}))),d.a.createElement("th",{scope:"col"},d.a.createElement("div",{className:"dropdown"},d.a.createElement("button",{className:"btn tbl-btn dropdown-toggle",type:"button",id:"dropdownMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Action"),d.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu"}))))),d.a.createElement("tbody",null,a&&a.length>0&&D.a.map(a,(function(t,a){if(a<e.state.length)return d.a.createElement("tr",{key:a},d.a.createElement("td",null,t.user_details),d.a.createElement("td",null,t.template_name),d.a.createElement("td",{className:"sent-count"},t.email_count),d.a.createElement("td",{className:"sent-count"},t.sms_count),d.a.createElement("td",null,t.notification_count),d.a.createElement("td",null,t.notification_delivered_count),d.a.createElement("td",null,t.notification_viewed_count),d.a.createElement("td",null,d.a.createElement(Q.a,{data:{date:t.added_date,format:"D-MMM-YYYY hh:mm A"}})),d.a.createElement("td",{Style:"display:flex;"},d.a.createElement("span",{onClick:function(){return e.toggleRecentCModal(a,t)},className:"shape magnifying-glass"},d.a.createElement("img",{src:B.a.EYE}))))})),d.a.createElement("div",null),(!a||0==a.length)&&d.a.createElement("tr",null,d.a.createElement("td",{colspan:7},d.a.createElement("div",{className:"no-data-img"},d.a.createElement("img",{className:"img-cover",src:B.a.NODATA}),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("text",{Style:"color:#9B9B9B;",className:"nodata"},"No Record Found!")))))),d.a.createElement(_.a,{className:"viewrow"},d.a.createElement(p.a,{lg:12},3==this.state.length?d.a.createElement("text",{className:"viewallcd",onClick:function(){return e.setState({length:a.length})}},"View All"):d.a.createElement("text",{className:"viewallcd",onClick:function(){return e.setState({length:3})}},"View Less"),this.state.length>3&&d.a.createElement("div",{className:"pull-right"},d.a.createElement(E.a,{"aria-label":"Page navigation example",className:"custom-pagination"},d.a.createElement(y.a,{disabled:s.currentPage<=0},d.a.createElement(v.a,{onClick:function(t){return e.handleRecentCommunicationPagination(t,0)},first:!0,href:"#"})),d.a.createElement(y.a,{disabled:s.currentPage<=0},d.a.createElement(v.a,{onClick:function(t){return e.handleRecentCommunicationPagination(t,s.currentPage-1)},previous:!0,href:"#"})),Object(n.a)(Array(s.pagesCount)).map((function(t,a){return a+1>=r&&a+1<=l&&d.a.createElement(y.a,{active:a===s.currentPage,key:a},d.a.createElement(v.a,{onClick:function(t){return e.handleRecentCommunicationPagination(t,a)},href:"#"},a+1))})),d.a.createElement(y.a,{disabled:s.currentPage>=s.pagesCount-1},d.a.createElement(v.a,{onClick:function(t){return e.handleRecentCommunicationPagination(t,s.currentPage+1)},next:!0,href:"#"})),d.a.createElement(y.a,{disabled:s.currentPage>=s.pagesCount},d.a.createElement(v.a,{onClick:function(t){return e.handleRecentCommunicationPagination(t,s.pagesCount-1)},last:!0,href:"#"})))))))))),d.a.createElement(N.a,{isOpen:this.state.communication_review_modal,toggle:this.toggleRecentCModal,className:"promtn-modal"},d.a.createElement(x.a,{toggle:this.toggleRecentCModal,className:"promotion"},"Promotion"),d.a.createElement(C.a,null,d.a.createElement(_.a,null,d.a.createElement(p.a,{lg:6,className:"allusercol"},d.a.createElement("h3",{className:"pr-ub-name"},this.state.RC_obj_detail.list_name),d.a.createElement("div",{className:"pr-ub-date"},d.a.createElement(Q.a,{data:{date:this.state.RC_obj_detail.added_date,format:"D-MMM-YYYY hh:mm A"}}))),d.a.createElement(p.a,{lg:6,className:"allusercol"},"1"===this.state.activeTab&&d.a.createElement("div",{className:"tabpreview"},d.a.createElement("div",{className:"pr-sent-title"}," Email sent"),d.a.createElement("div",{className:"pr-ub-name float-right"},this.state.RC_obj_detail.email_count)),"2"===this.state.activeTab&&d.a.createElement("div",{className:"tabpreview"},d.a.createElement("div",{className:"pr-sent-title"}," SMS sent"),d.a.createElement("div",{className:"pr-ub-name float-right"},this.state.RC_obj_detail.sms_count)),"3"===this.state.activeTab&&d.a.createElement("div",{className:"tabpreview"},d.a.createElement("div",{className:"pr-sent-title"}," Notification sent"),d.a.createElement("div",{className:"pr-ub-name float-right"},this.state.RC_obj_detail.notification_count)))),d.a.createElement("div",{className:"popuppreviewtab"},d.a.createElement(S.a,{tabs:!0},d.a.createElement(P.a,null,d.a.createElement(w.a,{className:V()({active:"1"===this.state.activeTab}),onClick:function(){e.toggle_("1")}},"Email")),d.a.createElement(P.a,null,d.a.createElement(w.a,{className:V()({active:"2"===this.state.activeTab}),onClick:function(){e.toggle_("2")}},"SMS")),d.a.createElement(P.a,null,d.a.createElement(w.a,{className:V()({active:"3"===this.state.activeTab}),onClick:function(){e.toggle_("3")}},"Notification"))),d.a.createElement(k.a,{activeTab:this.state.activeTab},d.a.createElement(j.a,{tabId:"1"},d.a.createElement(_.a,null,d.a.createElement(p.a,{sm:"12",className:"temptab p-0"},d.a.createElement("div",{className:"subjecttemp mb-2"},d.a.createElement("text",{className:"subject"},"Subject -",d.a.createElement("text",{className:"subject1"},"   ",this.state.RC_obj_detail.subject))),d.a.createElement("div",{className:"emailbody",dangerouslySetInnerHTML:{__html:this.state.RC_obj_detail.email_body}})))),d.a.createElement(j.a,{tabId:"2"},d.a.createElement(_.a,null,d.a.createElement(p.a,{sm:"12",className:"temptab p-0"},d.a.createElement("div",{className:"pr-body-text"},this.state.RC_obj_detail.message_body)))),d.a.createElement(j.a,{tabId:"3"},d.a.createElement(_.a,null,d.a.createElement(p.a,{sm:"12",className:"temptab p-0"},d.a.createElement("div",{className:"pr-body-text"},this.state.RC_obj_detail.notification_message)))))),d.a.createElement("div",{className:"templatepreview"}))),d.a.createElement(N.a,{isOpen:this.state.communication_resend_modal,toggle:this.toggleCResendCModal,className:this.props.className},d.a.createElement(x.a,{toggle:this.toggleCResendCModal,className:"resend"},d.a.createElement(p.a,{lg:12},d.a.createElement("h5",{className:"resend title"}," RESEND"))),d.a.createElement(C.a,null,d.a.createElement(_.a,{className:"usertime"},d.a.createElement(p.a,{lg:12},d.a.createElement("div",null,"Campaign Type"),d.a.createElement("div",null,this.state.Resend_obj_detail.user_details," "),d.a.createElement("span",{className:"allusers"},this.state.Resend_obj_detail.from_date&&this.state.Resend_obj_detail.to_date&&d.a.createElement("span",null,"(",d.a.createElement(Q.a,{data:{date:this.state.Resend_obj_detail.from_date,format:"D-MMM-YYYY hh:mm A"}})," -",d.a.createElement(Q.a,{data:{date:this.state.Resend_obj_detail.to_date,format:"D-MMM-YYYY hh:mm A"}}),")"),!this.state.Resend_obj_detail.from_date&&!this.state.Resend_obj_detail.to_date&&d.a.createElement("span",null,"(",d.a.createElement(Q.a,{data:{date:this.state.Resend_obj_detail.added_date,format:"DD/MM/YYYY"}}),")")))),d.a.createElement(_.a,{className:"communication"},d.a.createElement(p.a,{lg:12},d.a.createElement("div",{className:"comchannel"},"Communication Channel"),d.a.createElement("div",{className:"customcontrol"},d.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline"},d.a.createElement(R.a,{type:"checkbox",id:"email",className:"custom-control-input",onChange:this.handleNotificationType,checked:o.email,value:o.email}),d.a.createElement("label",{className:"custom-control-label",for:"email"},"E-MAIL")),d.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline"},d.a.createElement(R.a,{type:"checkbox",id:"message",className:"custom-control-input",onChange:this.handleNotificationType,checked:o.message,value:o.message}),d.a.createElement("label",{className:"custom-control-label",for:"message"},"SMS")),d.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline"},d.a.createElement(R.a,{type:"checkbox",id:"notification",className:"custom-control-input",onChange:this.handleNotificationType,checked:o.notification,value:o.notification}),d.a.createElement("label",{className:"custom-control-label",for:"notification"},"Notification"))))),d.a.createElement(p.a,null,d.a.createElement(_.a,{className:"select preview"},d.a.createElement(p.a,{md:5,className:"tempselect"},d.a.createElement("div",{className:"templates1"},"Templates"),d.a.createElement(u.a,{class:"form-control",value:o.email_template_id,onChange:this.handleChange,options:i}),this.state.depositPromocodes.length>0&&d.a.createElement(u.a,{class:"form-control",value:o.promo_code_id,onChange:this.handlePromocodeChange,options:this.state.depositPromocodes},d.a.createElement("div",{className:"Select-placeholder"},"Select Promocode")))),d.a.createElement(_.a,{className:"popcardrow"},d.a.createElement(p.a,{md:4},d.a.createElement(g.a,{className:"popcard"},d.a.createElement("h6",{className:"popcard6"},"E-MAIL"),d.a.createElement("h2",{className:"popcard8"}," ",this.state.Resend_obj_detail.email_count))),d.a.createElement(p.a,{md:4},d.a.createElement(g.a,{className:"popcard"},d.a.createElement("h6",{className:"popcard6"},"SMS"),d.a.createElement("h2",{className:"popcard8"},this.state.Resend_obj_detail.sms_count))),d.a.createElement(p.a,{md:4},d.a.createElement(g.a,{className:"popcard"},d.a.createElement("h6",{className:"popcard6"},"Notification"),d.a.createElement("h2",{className:"popcard8"},this.state.Resend_obj_detail.notification_count))))),d.a.createElement(_.a,null,d.a.createElement(p.a,{lg:12,className:"resend"},d.a.createElement(f.a,{className:"resendbtnpop",outline:!0,disabled:!o.email_template_id,color:"danger",onClick:function(){return e.notifyBySelection()}},"Resend"))))),this.state.fixture_promote_model&&d.a.createElement(W,{IsPromoteFixtureShow:this.state.fixture_promote_model,IsPromoteFixtureHide:this.PromoteFixtureHide,FixtureData:{fixtureObj:c}}))}}]),a}(m.Component);t.default=Object(G.b)((function(e){return e}),(function(e){return{setCdBalance:function(t){return e({type:J.a,cd_balance:t})},updateEmailBalance:function(t){return e({type:J.b,value:t})},updateSmsBalance:function(t){return e({type:J.d,value:t})},updateNotificationBalance:function(t){return e({type:J.c,value:t})}}}))(Z)}}]);
//# sourceMappingURL=158.fc41a034.chunk.js.map