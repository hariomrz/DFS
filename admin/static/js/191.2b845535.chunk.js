(this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]||[]).push([[191],{866:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return S}));var n=a(59),l=a(11),r=a(12),i=a(15),s=a(14),c=a(0),o=a.n(c),m=a(155),u=a(156),d=a(154),p=a(516),E=a(492),g=a(500),h=a(493),f=a(495),N=a(499),v=a(539),b=a(543),k=a(538),A=a(542),_=a(8),B=a(9),y=a(18),P=a(5),w=a.n(P),C=a(507),R=a.n(C),S=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).handleNameChange=function(e){var t=e.target.name,a=e.target.value;r.setState(Object(n.a)({},t,a)),"link"!=t||a.match(/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/)?r.setState({validURL:!1},(function(){this.validateForm()})):r.setState({validURL:!0})},r.onChangeImage=function(e){r.setState({fileName:URL.createObjectURL(e.target.files[0])},(function(){this.validateForm()}));var t=e.target.files[0];if(t){var a=new FormData;a.append("userfile",t),B.a.multipartPost(_.nk+_.D,a).then((function(e){r.setState({fileUplode:e.data.image_url,ImageName:e.data.file_name})})).catch((function(e){y.notify.show(_.Ri,"error",3e3)}))}},r.resetFile=function(e){e.preventDefault(),r.setState({fileName:null,fileUplode:null},(function(){this.validateForm()}))},r.updateBannerStatus=function(e,t,a){r.setState({ActionPosting:!0});var n=r.state.AppBannersList,l={status:a,app_banner_id:t};B.a.Rest(_.nk+_.Aj,l).then((function(t){t.response_code===_.qk&&(y.notify.show(t.message,"success",5e3),n.map((function(e,t){n[t].status=0,r.setState({tempBannerList:n})})),n[e].status=a,r.setState({AppBannersList:n,ActionPosting:!1}))})).catch((function(e){y.notify.show(_.Ri,"error",5e3)}))},r.deleteToggle=function(e,t,a){e&&r.setState({deleteIndex:t,deleteItem:a}),r.setState((function(e){return{DeleteModalOpen:!e.DeleteModalOpen}}))},r.deleteAppBanner=function(){var e=r.state,t=e.deleteIndex,a=e.deleteItem,n=e.AppBannersList;r.setState({DeleteActionPosting:!0});var l={app_banner_id:a.app_banner_id,banner_title:a.title,banner_image:"",banner_link:a.link,status:"0",image_url:""},i=n;B.a.Rest(_.nk+_.ib,l).then((function(e){e.response_code===_.qk&&(w.a.remove(i,(function(e,a){return a==t})),r.deleteToggle(!1,{},{}),y.notify.show(e.message,"success",5e3),r.setState({AppBannersList:i,DeleteActionPosting:!1}))})).catch((function(e){y.notify.show(_.Ri,"error",5e3)}))},r.state={TotalBanner:0,PERPAGE:5,CURRENT_PAGE:1,NewBannerToggle:!1,title:"",link:"",fileUplode:"",fileName:"",validURL:!1,dropdownOpen:!1,ActionPosting:!1,DeleteActionPosting:!1,DeleteModalOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.getAppBanner()}},{key:"getAppBanner",value:function(){var e=this,t=this.state,a={items_perpage:t.PERPAGE,total_items:0,current_page:t.CURRENT_PAGE,sort_order:"DESC",sort_field:"AB.created_date",AppBannersList:[]};B.a.Rest(_.nk+_.td,a).then((function(t){t.response_code===_.qk&&e.setState({AppBannersList:t.data.result,TotalBanner:t.data.total})})).catch((function(e){y.notify.show(_.Ri,"error",5e3)}))}},{key:"NewBannerTogle",value:function(e){this.setState({NewBannerToggle:e})}},{key:"validateForm",value:function(){var e=this.state,t=e.title,a=e.link,n=e.fileName;this.setState({AddBannerPosting:!1}),w.a.isEmpty(t)||w.a.isEmpty(a)||w.a.isEmpty(n)||this.setState({AddBannerPosting:!0})}},{key:"createBanner",value:function(){var e=this,t=this.state,a=t.title,n=t.link,l=t.fileUplode,r=t.ImageName;this.setState({AddBannerPosting:!1});var i={banner_title:a,banner_link:n,banner_image:l,is_preview:1,is_remove:1,uploadbtn:0,image_name:r,size_tip:""};B.a.Rest(_.nk+_.b,i).then((function(t){t.response_code===_.qk&&(y.notify.show(t.message,"success",3e3),e.setState({link:null,title:null,fileUplode:"",fileName:"",AddBannerPosting:!0},(function(){this.NewBannerTogle(!1),this.getAppBanner()})))})).catch((function(e){y.notify.show(_.Ri,"error",3e3)}))}},{key:"handlePageChange",value:function(e){var t=this;this.setState({CURRENT_PAGE:e},(function(){t.getAppBanner()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.NewBannerToggle,n=t.AddBannerPosting,l=t.validURL,r=t.title,i=t.link,s=t.AppBannersList,_=t.CURRENT_PAGE,B=t.TotalBanner,y=t.PERPAGE,P=t.ActionPosting,C=t.DeleteActionPosting;return o.a.createElement(c.Fragment,null,!a&&o.a.createElement("div",{className:"mt-4 app-banner"},o.a.createElement(m.a,null,o.a.createElement(u.a,{md:12},o.a.createElement("h1",{className:"h1-cls"},"App Banner"))),o.a.createElement(m.a,{className:"filters-box"},o.a.createElement(u.a,{md:12},o.a.createElement("div",{className:"filters-area"},o.a.createElement(d.a,{className:"btn-secondary",onClick:function(){return e.NewBannerTogle(!0)}},"New App Banner")))),o.a.createElement(m.a,{className:"animated fadeIn"},o.a.createElement(u.a,{md:12,className:"table-responsive common-table"},o.a.createElement(p.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"left-th pl-4"},"Title"),o.a.createElement("th",null,"Image"),o.a.createElement("th",null,"Link"),o.a.createElement("th",null,"Status"),o.a.createElement("th",null,"Action"))),w.a.map(s,(function(t,a){return o.a.createElement("tbody",{key:a},o.a.createElement("tr",null,o.a.createElement("td",{className:"pl-4"},t.banner_title),o.a.createElement("td",null,o.a.createElement("figure",{className:"app-banner-img"},o.a.createElement("img",{src:t.image_url,className:"img-cover",alt:""}))),o.a.createElement("td",null,t.banner_link),o.a.createElement("td",null,1==t.status?o.a.createElement("i",{className:"icon-verified active"}):o.a.createElement("i",{className:"icon-inactive"})),o.a.createElement("td",null,o.a.createElement(E.a,null,o.a.createElement(g.a,{disabled:P,className:"icon-action"}),o.a.createElement(h.a,null,1==t.status?o.a.createElement(f.a,{onClick:function(){return e.updateBannerStatus(a,t.app_banner_id,0)}},"Inactive"):o.a.createElement(f.a,{onClick:function(){return e.updateBannerStatus(a,t.app_banner_id,1)}},"Active"),o.a.createElement(f.a,{onClick:function(){e.deleteToggle(!0,a,t)}},"Delete"))))))}))))),B>y&&o.a.createElement("div",{className:"custom-pagination userlistpage-paging float-right"},o.a.createElement(R.a,{activePage:_,itemsCountPerPage:y,totalItemsCount:B,pageRangeDisplayed:5,onChange:function(t){return e.handlePageChange(t)}}))),a&&o.a.createElement("div",{className:"mt-4"},o.a.createElement(m.a,null,o.a.createElement(u.a,{md:12},o.a.createElement("h1",{className:"h1-cls"},"New Banner"))),o.a.createElement("div",{className:"animated fadeIn new-banner"},o.a.createElement(u.a,{md:12,className:"input-row"},o.a.createElement(m.a,null,o.a.createElement(u.a,{md:3,className:"b-input-label"},"Title",o.a.createElement("span",{className:"asterrisk"},"*")),o.a.createElement(u.a,{md:9},o.a.createElement(N.a,{type:"text",name:"title",placeholder:"Title",onChange:this.handleNameChange,value:r})))),o.a.createElement(u.a,{md:12,className:"input-row"},o.a.createElement(m.a,null,o.a.createElement(u.a,{md:3,className:"b-input-label"},"Link",o.a.createElement("span",{className:"asterrisk"},"*")),o.a.createElement(u.a,{md:9},o.a.createElement(N.a,{type:"text",name:"link",placeholder:"Target Url",onChange:this.handleNameChange,value:i}),l&&o.a.createElement("span",{className:"error-text"},"Please upload valid Link")))),o.a.createElement(u.a,{md:12,className:"input-row"},o.a.createElement(m.a,null,o.a.createElement(u.a,{md:3,className:"b-input-label"},"Image",o.a.createElement("span",{className:"asterrisk"},"*")),o.a.createElement(u.a,{md:9},o.a.createElement(N.a,{type:"file",name:"banner_image",onChange:this.onChangeImage}),this.state.fileName&&o.a.createElement("div",null,o.a.createElement(d.a,{className:"btn-secondary mt-4 mb-3",onClick:this.resetFile},"Remove"),o.a.createElement("img",{className:"img-cover",src:this.state.fileName}))))),o.a.createElement(u.a,{md:12,className:"banner-action"},o.a.createElement(d.a,{disabled:!n,className:"btn-secondary mr-3",onClick:function(){return e.createBanner()}},"Save"),o.a.createElement(d.a,{className:"btn-secondary-outline",onClick:function(){return e.NewBannerTogle(!1)}},"Cancel")))),o.a.createElement("div",null,o.a.createElement(v.a,{isOpen:this.state.DeleteModalOpen,toggle:this.deleteToggle},o.a.createElement(b.a,null,"Delete App Banner"),o.a.createElement(k.a,null,"Are you sure to delete this App banner data?"),o.a.createElement(A.a,null,o.a.createElement(d.a,{disabled:C,color:"secondary",onClick:function(){return e.deleteAppBanner()}},"Yes")," ",o.a.createElement(d.a,{color:"primary",onClick:this.deleteToggle},"No")))))}}]),a}(c.Component)}}]);
//# sourceMappingURL=191.2b845535.chunk.js.map