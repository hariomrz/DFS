(this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]||[]).push([[217],{981:function(e,t,a){"use strict";a.r(t);var l=a(11),n=a(12),c=a(15),s=a(14),r=a(0),o=a.n(r),i=a(155),d=a(156),m=a(154),u=a(516),b=a(8),p=a(9),h=a(18),C=a(507),E=a.n(C),S=a(24),g=a(539),_=a(538),v=a(499),P=a(542),w=a(10),k=a(158),f=a(514),R=a(511),O=[{value:1,label:"Yes"},{value:0,label:"No"}],N=[{value:0,label:"Real Money"},{value:1,label:"Bonus"}],y=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getLevel=function(){var e=n.state,t={items_perpage:e.PERPAGE,current_page:e.CURRENT_PAGE};Object(f.vc)(t).then((function(e){if(e.response_code==b.qk){var t=e.data?e.data.level_list:[],a=[];Object(w.a)(t,(function(e){a.push({value:e.level_number,label:e.level_str})})),n.setState({LevelOptions:a})}else h.notify.show(b.Ri,"error",3e3)})).catch((function(e){h.notify.show(b.Ri,"error",3e3)}))},n.getBadge=function(){Object(f.uc)({}).then((function(e){if(e.response_code==b.qk){var t=e.data?e.data:[],a=[];Object(w.a)(t,(function(e){a.push({value:e.badge_id,label:e.badge_name})})),n.setState({BadgeOptions:a})}else h.notify.show(b.Ri,"error",3e3)})).catch((function(e){h.notify.show(b.Ri,"error",3e3)}))},n.getPercent=function(){var e=[];Object(w.h)(101,(function(t){0!==t&&e.push({value:t,label:t})})),n.setState({PercentOption:e})},n.handleSelectChange=function(e,t){var a=n.state.RewardArr;"CoinsSelect"===t&&0===e.value&&(a.CoinPoints=""),"CashbackSelect"===t&&0===e.value&&(a.CashbackPrizeSelect="",a.CashbackPercentSelect="",a.CashbackMaxCap=""),"ContestSelect"===t&&0===e.value&&(a.ContestPrizeSelect="",a.ContestPercentSelect="",a.ContestMaxCap=""),Object(w.e)(e)||(a[t]=e.value,n.setState({RewardArr:a,EditForm:!1}))},n.handleInputChange=function(e){var t=n.state.RewardArr,a=e.target.getAttribute("data-inp"),l=e.target.name,c=e.target.value;t[l]=c,n.setState({RewardArr:t,EditForm:!1},(function(){if(Number(n.state.RewardArr[l])<1||Number(n.state.RewardArr[l])>99999){t[l]="";var e=a+" value should be between 1 to 100000";return h.notify.show(e,"error",3e3),n.setState({RewardArr:t}),!1}}))},n.checkFormValid=function(){var e=n.state.RewardArr,t=!0;return Object(w.d)(e.LevelSelect)&&(h.notify.show(R.dc,"error",1500),t=!1),Object(w.d)(e.BadgeSelect)&&(h.notify.show(R.Wb,"error",1500),t=!1),e.CoinsSelect||e.CashbackSelect||e.ContestSelect||(h.notify.show(R.ec,"error",1500),t=!1),e.CoinsSelect&&Object(w.d)(e.CoinPoints)&&(h.notify.show(R.Yb,"error",1500),t=!1),e.CashbackSelect&&Object(w.d)(e.CashbackPercentSelect)&&Object(w.d)(e.CashbackMaxCap)&&(0!==e.CashbackPrizeSelect||1!==e.CashbackPrizeSelect)&&(h.notify.show(R.Xb,"error",1500),t=!1),e.ContestSelect&&Object(w.d)(e.ContestPercentSelect)&&Object(w.d)(e.ContestMaxCap)&&(0!==e.ContestPrizeSelect||1!==e.ContestPrizeSelect)&&(h.notify.show(R.Zb,"error",1500),t=!1),t},n.emptyForm=function(){for(var e in n.state.RewardArr)n.state.RewardArr[e]="";n.state.RewardArr.CoinsSelect=0,n.state.RewardArr.CashbackSelect=0,n.state.RewardArr.ContestSelect=0},n.addRewards=function(){if(!n.checkFormValid())return!1;var e=n.state.RewardArr,t={level_number:e.LevelSelect,badge_id:e.BadgeSelect,coins:{allow:e.CoinsSelect,amt:e.CoinPoints},deposit_cashback:{allow:e.CashbackSelect,amt:e.CashbackPercentSelect,type:e.CashbackPrizeSelect,cap:e.CashbackMaxCap},joining_cashback:{allow:e.ContestSelect,amt:e.ContestPercentSelect,type:e.ContestPrizeSelect,cap:e.ContestMaxCap}};n.setState({addRewdPosting:!0});var a=f.oc;e.reward_id&&(t.reward_id=e.reward_id,a=f.yc),a(t).then((function(e){e.response_code==b.qk?(n.props.modalActioCallback(),h.notify.show(e.message,"success",5e3),n.emptyForm(),n.setState({EditForm:!0})):h.notify.show(b.Ri,"error",3e3),n.setState({addRewdPosting:!1})})).catch((function(e){h.notify.show(b.Ri,"error",3e3)}))},n.handleChildToggle=function(e){e.stopPropagation(),n.emptyForm(),n.props.modalCallback(),n.setState({EditForm:!0})},n.state={CURRENT_PAGE:1,PERPAGE:1e3,LevelOptions:[],BadgeOptions:[],PercentOption:[],addRewdPosting:!1,EditForm:!0,RewardArr:{LevelSelect:"",BadgeSelect:"",CoinsSelect:0,CoinPoints:"",CashbackSelect:0,CashbackPrizeSelect:"",CashbackPercentSelect:"",CashbackMaxCap:"",ContestSelect:0,ContestPrizeSelect:"",ContestPercentSelect:"",ContestMaxCap:""}},n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.getLevel(),this.getBadge(),this.getPercent()}},{key:"render",value:function(){var e=this,t=this.props,a=t.AddRewardsModalOpen,l=t.EditRItem,n=t.EditFlag,c=this.state,s=c.PercentOption,r=c.RewardArr,u=c.LevelOptions,b=c.BadgeOptions,p=c.addRewdPosting,h=c.EditForm;n&&h&&!Object(w.d)(l)&&(r.level_str=l.level_str,r.reward_id=l.reward_id,r.LevelSelect=l.level_number,r.BadgeSelect=l.badge_id,r.CoinsSelect=l.coins.allow?Number(l.coins.allow):"",r.CoinPoints=r.CoinsSelect?l.coins.amt:"",r.CashbackSelect=Number(l.deposit_cashback.allow),r.CashbackPrizeSelect=r.CashbackSelect?l.deposit_cashback.type:"",r.CashbackPercentSelect=Number(l.deposit_cashback.amt),r.CashbackMaxCap=r.CashbackSelect?l.deposit_cashback.cap:"",r.ContestSelect=Number(l.joining_cashback.allow),r.ContestPrizeSelect=r.ContestSelect?l.joining_cashback.type:"",r.ContestPercentSelect=Number(l.joining_cashback.amt),r.ContestMaxCap=r.ContestSelect?l.joining_cashback.cap:"");var C={is_disabled:!1,is_searchable:!1,is_clearable:!1,menu_is_open:!1,class_name:"custom-form-control",place_holder:"Select",modalCallback:function(t,a){return e.handleSelectChange(t,a)}},E=Object(S.a)(Object(S.a)({},C),{},{sel_options:u,selected_value:r.LevelSelect,select_name:"LevelSelect"}),f=Object(S.a)(Object(S.a)({},C),{},{sel_options:b,selected_value:r.BadgeSelect,select_name:"BadgeSelect"}),R=Object(S.a)(Object(S.a)({},C),{},{sel_options:O,selected_value:r.CoinsSelect,select_name:"CoinsSelect"}),y=Object(S.a)(Object(S.a)({},C),{},{sel_options:O,selected_value:r.CashbackSelect,select_name:"CashbackSelect"}),A=Object(S.a)(Object(S.a)({},C),{},{class_name:"custom-form-control",is_disabled:!r.CashbackSelect,sel_options:N,selected_value:r.CashbackPrizeSelect,select_name:"CashbackPrizeSelect"}),j=Object(S.a)(Object(S.a)({},C),{},{is_searchable:!0,is_disabled:!r.CashbackSelect,place_holder:"Select %",sel_options:s,selected_value:r.CashbackPercentSelect,select_name:"CashbackPercentSelect"}),x=Object(S.a)(Object(S.a)({},C),{},{sel_options:O,selected_value:r.ContestSelect,select_name:"ContestSelect"}),M=Object(S.a)(Object(S.a)({},C),{},{is_disabled:!r.ContestSelect,sel_options:N,selected_value:r.ContestPrizeSelect,select_name:"ContestPrizeSelect"}),L=Object(S.a)(Object(S.a)({},C),{},{is_searchable:!0,is_disabled:!r.ContestSelect,place_holder:"Select %",class_name:"custom-form-control r-prct-dd",sel_options:s,selected_value:r.ContestPercentSelect,select_name:"ContestPercentSelect"});return o.a.createElement(g.a,{isOpen:a,toggle:this.handleChildToggle,className:"addrewards-modal modal-lg xaddrewards-cat-mod"},o.a.createElement(_.a,null,o.a.createElement(i.a,null,o.a.createElement(d.a,{md:12},o.a.createElement("h3",{className:"h3-cls"},r.reward_id?"Update":"Add"," Rewards"))),o.a.createElement(i.a,null,o.a.createElement(d.a,{md:3},o.a.createElement("div",{className:"input-box"},o.a.createElement("label",null,"Select Level"),r.reward_id?o.a.createElement("div",{className:"xp-sel-title"},r?r.level_str:""):o.a.createElement(k.a,{SelectProps:E})))),o.a.createElement(i.a,null,o.a.createElement(d.a,{md:3},o.a.createElement("div",{className:"input-box"},o.a.createElement("label",null,"Badge"),o.a.createElement(k.a,{SelectProps:f})))),o.a.createElement(i.a,null,o.a.createElement(d.a,{md:3},o.a.createElement("div",{className:"input-box"},o.a.createElement("label",null,"Coins"),o.a.createElement(k.a,{SelectProps:R}))),o.a.createElement(d.a,{md:3},o.a.createElement("div",{className:"input-box"},o.a.createElement("label",{className:"blank-lbl"}),o.a.createElement(v.a,{disabled:!r.CoinsSelect,className:r.CoinsSelect?"":"disable",type:"number",placeholder:"Points",name:"CoinPoints","data-inp":"Coins points",value:r.CoinPoints||"",onChange:function(t){return e.handleInputChange(t)}})))),o.a.createElement(i.a,null,o.a.createElement(d.a,{md:3},o.a.createElement("div",{className:"input-box"},o.a.createElement("label",null,"Cashback"),o.a.createElement(k.a,{SelectProps:y}))),o.a.createElement(d.a,{md:3},o.a.createElement("div",{className:"input-box"},o.a.createElement("label",{className:"blank-lbl"},"Currency Value"),o.a.createElement(k.a,{SelectProps:A}))),o.a.createElement(d.a,{md:3},o.a.createElement("div",{className:"input-box"},o.a.createElement("label",{className:"blank-lbl"},"Select Percentage"),o.a.createElement(k.a,{SelectProps:j}))),o.a.createElement(d.a,{md:3},o.a.createElement("div",{className:"input-box"},o.a.createElement("label",null,"Maximum Cap"),o.a.createElement(v.a,{disabled:!r.CashbackSelect,className:r.CashbackSelect?"":"disable",type:"number",placeholder:"Points",name:"CashbackMaxCap","data-inp":"Cashback maximum cap",value:r.CashbackMaxCap,onChange:function(t){return e.handleInputChange(t)}})))),o.a.createElement(i.a,null,o.a.createElement(d.a,{md:3},o.a.createElement("div",{className:"input-box"},o.a.createElement("label",null,"Contest Joining Discount"),o.a.createElement(k.a,{SelectProps:x}))),o.a.createElement(d.a,{md:3},o.a.createElement("div",{className:"input-box"},o.a.createElement("label",{className:"blank-lbl"},"Currency Value"),o.a.createElement(k.a,{SelectProps:M}))),o.a.createElement(d.a,{md:3},o.a.createElement("div",{className:"input-box"},o.a.createElement("label",{className:"blank-lbl"},"Select Percentage"),o.a.createElement(k.a,{SelectProps:L}))),o.a.createElement(d.a,{md:3},o.a.createElement("div",{className:"input-box"},o.a.createElement("label",null,"Maximum Cap"),o.a.createElement(v.a,{disabled:!r.ContestSelect,className:r.ContestSelect?"":"disable",type:"number",placeholder:"Points",name:"ContestMaxCap","data-inp":"Contest maximum cap",value:r.ContestMaxCap,onChange:function(t){return e.handleInputChange(t)}}))))),o.a.createElement(P.a,null,o.a.createElement(m.a,{disabled:p||h,className:"btn-secondary-outline",onClick:this.addRewards},r.reward_id?"Update":"Add"," Rewards")))}}]),a}(r.Component),A=a(565),j=a(157),x=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getRewardList=function(){n.setState({listPosting:!0});var e=n.state,t={items_perpage:e.PERPAGE,current_page:e.CURRENT_PAGE,sort_order:e.isDescOrder?"DESC":"ASC",sort_field:e.sortField};p.a.Rest(b.nk+b.ik,t).then((function(e){e.response_code==b.qk?n.setState({RewardsList:e.data?e.data.reward_list:[],Total:e.data?e.data.total:"",listPosting:!1}):h.notify.show(b.Ri,"error",3e3)})).catch((function(e){h.notify.show(b.Ri,"error",3e3)}))},n.toggleActionPopup=function(e,t){e||(t={}),n.setState({AddRewardsModalOpen:!n.state.AddRewardsModalOpen,EditRItem:t,EditFlag:e})},n.deleteToggle=function(e,t){n.setState((function(a){return{deleteIndex:t,REW_ID:e,DeleteModalOpen:!a.DeleteModalOpen}}))},n.deleteReward=function(){n.setState({DeletePosting:!0});var e=n.state,t=e.deleteIndex,a={reward_id:e.REW_ID},l=e.RewardsList;Object(f.rc)(a).then((function(e){e.response_code===b.qk&&(Object(w.g)(l,(function(e,a){return a==t})),h.notify.show(e.message,"success",5e3),n.setState({RewardsList:l,DeletePosting:!1,DeleteModalOpen:!1}))})).catch((function(e){h.notify.show(b.Ri,"error",5e3)}))},n.toggleYesActionPopup=function(){n.setState({AddRewardsModalOpen:!1,EditRItem:{}},(function(){n.getRewardList()}))},n.state={PERPAGE:b.Vf,CURRENT_PAGE:1,StartingPoints:"",RewardsList:[],formValid:!0,sortField:"level_number",isDescOrder:!1,AddRewardsModalOpen:!1,SubAddRewardsModalOpen:!1,LevelSelected:"",DeleteModalOpen:!1,DeletePosting:!1,listPosting:!1},n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){"0"==w.i.allowXpPoints()&&(h.notify.show(b.og,"error",5e3),this.props.history.push("/dashboard")),this.getRewardList()}},{key:"sortByColumn",value:function(e,t){var a=!t;this.setState({sortField:e,isDescOrder:a,CURRENT_PAGE:1},this.getRewardList)}},{key:"handlePageChange",value:function(e){var t=this;e!==this.state.CURRENT_PAGE&&this.setState({CURRENT_PAGE:e},(function(){t.getRewardList()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.RewardsList,l=t.CURRENT_PAGE,n=t.PERPAGE,c=t.Total,s=t.AddRewardsModalOpen,r=t.Message,p=(t.formValid,t.isDescOrder),h=t.sortField,C=t.DeleteModalOpen,S=t.DeletePosting,g=t.listPosting,_=t.EditRItem,v=t.EditFlag,P={Message:r,modalCallback:function(){return e.toggleActionPopup(!1,{})},AddRewardsModalOpen:s,modalActioCallback:this.toggleYesActionPopup,EditRItem:_,EditFlag:v},k={publishModalOpen:C,publishPosting:S,modalActionNo:this.deleteToggle,modalActionYes:this.deleteReward,MainMessage:R.ac,SubMessage:R.bc};return o.a.createElement("div",{className:"rewards-level animated fadeIn"},o.a.createElement(y,P),C&&o.a.createElement(A.a,k),o.a.createElement(i.a,{className:"level-sub-header mb-20"},o.a.createElement(d.a,{xs:6},o.a.createElement("h2",{className:"animate-left"},"Rewards:")),o.a.createElement(d.a,{xs:6,className:"text-right"},o.a.createElement(m.a,{className:"btn-secondary-outline animate-right",onClick:function(){return e.toggleActionPopup(!1,{})}},"Add Rewards"))),o.a.createElement("div",{className:"xwhite-container"},o.a.createElement(i.a,null,o.a.createElement(d.a,{md:12,className:"table-responsive common-table"},o.a.createElement(u.a,{className:"animate-top"},o.a.createElement("thead",{className:"height-40"},o.a.createElement("tr",null,o.a.createElement("th",{onClick:function(){return e.sortByColumn("level_number",p)}},"Level",o.a.createElement("div",{className:"d-inline-block ".concat("level_number"===h&&p?"":"rotate-icon")},o.a.createElement("i",{className:"icon-Shape ml-1"}))),o.a.createElement("th",null,"Rewards"),o.a.createElement("th",{className:"text-center"},"Action"))),c>0?Object(w.a)(a,(function(t,a){var l=t.badge_name+",";return Number(t.coins.allow)&&(l+=" Coins-"+t.coins.amt+", "),Number(t.deposit_cashback.allow)&&(l+=" Cashback("+(Number(1==t.deposit_cashback.type)?"B":w.i.getCurrencyCode())+") -"+t.deposit_cashback.amt+"% ("+t.deposit_cashback.cap+"), "),Number(t.joining_cashback.allow)&&(l+=" Contest Discount("+(Number(1==t.joining_cashback.type)?"B":w.i.getCurrencyCode())+") -"+t.joining_cashback.amt+"% ("+t.joining_cashback.cap+") "),l=l.replace(/,\s*$/,""),o.a.createElement("tbody",{key:a},o.a.createElement("tr",null,o.a.createElement("td",null,t.level_str),o.a.createElement("td",null,l),o.a.createElement("td",{className:"text-center"},o.a.createElement("a",{className:"action-icn",onClick:function(){return e.toggleActionPopup(!0,t)}},o.a.createElement("i",{className:"icon-edit"})),o.a.createElement("a",{className:"action-icn",onClick:function(){return e.deleteToggle(t.reward_id,a)}},o.a.createElement("i",{className:"icon-delete"})))))})):o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"22"},0!=c||g?o.a.createElement(j.a,null):o.a.createElement("div",{className:"no-records"},b.Cg)))))))),c>n&&o.a.createElement("div",{className:"custom-pagination lobby-paging"},o.a.createElement(E.a,{activePage:l,itemsCountPerPage:n,totalItemsCount:c,pageRangeDisplayed:5,onChange:function(t){return e.handlePageChange(t)}})))}}]),a}(r.Component);t.default=x}}]);
//# sourceMappingURL=217.69e114e2.chunk.js.map